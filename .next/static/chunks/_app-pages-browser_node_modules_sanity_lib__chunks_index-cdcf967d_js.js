"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_sanity_lib__chunks_index-cdcf967d_js"],{

/***/ "(app-pages-browser)/./node_modules/sanity/lib/_chunks/PaneItem-cc425889.js":
/*!**************************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks/PaneItem-cc425889.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaneItem: function() { return /* binding */ PaneItem; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sanity/icons */ \"(app-pages-browser)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var _sanity_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @sanity/types */ \"(app-pages-browser)/./node_modules/@sanity/types/lib/index.esm.js\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/index.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sanity */ \"(app-pages-browser)/./node_modules/sanity/lib/index.esm.js\");\n/* harmony import */ var _desk_62578a15_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./desk-62578a15.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/desk-62578a15.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/omit.js */ \"(app-pages-browser)/./node_modules/lodash/omit.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_omit_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sanity/util/paths */ \"(app-pages-browser)/./node_modules/@sanity/util/lib/paths.esm.js\");\n\n\n\n\n\n\n\n\n\n\nconst getUnknownTypeFallback = (id, typeName) => ({\n  title: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"em\", {\n    children: [\"No schema found for type \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n      children: typeName\n    })]\n  }),\n  subtitle: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"em\", {\n    children: [\"Document: \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n      children: id\n    })]\n  }),\n  media: () => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_4__.WarningOutlineIcon, {})\n});\nfunction MissingSchemaType(props) {\n  const {\n    layout,\n    value\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_5__.SanityDefaultPreview, {\n    ...getUnknownTypeFallback(value._id, value._type),\n    layout\n  });\n}\nfunction getIconWithFallback(icon, schemaType, defaultIcon) {\n  if (icon === false) {\n    return false;\n  }\n  return icon || schemaType && schemaType.icon || defaultIcon || false;\n}\nfunction PaneItem(props) {\n  const {\n    icon,\n    id,\n    layout = \"default\",\n    pressed,\n    schemaType,\n    selected,\n    title,\n    value,\n    margin,\n    marginBottom,\n    marginTop\n  } = props;\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_5__.useSchema)();\n  const documentPreviewStore = (0,sanity__WEBPACK_IMPORTED_MODULE_5__.useDocumentPreviewStore)();\n  const {\n    ChildLink\n  } = (0,_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_6__.usePaneRouter)();\n  const documentPresence = (0,sanity__WEBPACK_IMPORTED_MODULE_5__.useDocumentPresence)(id);\n  const hasSchemaType = Boolean(schemaType && schemaType.name && schema.get(schemaType.name));\n  const [clicked, setClicked] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const preview = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (value && (0,_sanity_types__WEBPACK_IMPORTED_MODULE_7__.isSanityDocument)(value)) {\n      if (!schemaType || !hasSchemaType) {\n        return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MissingSchemaType, {\n          value\n        });\n      }\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_6__.PaneItemPreview, {\n        documentPreviewStore,\n        icon: getIconWithFallback(icon, schemaType, _sanity_icons__WEBPACK_IMPORTED_MODULE_4__.DocumentIcon),\n        layout,\n        schemaType,\n        value,\n        presence: documentPresence\n      });\n    }\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_5__.SanityDefaultPreview, {\n      status: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_8__.Text, {\n        muted: true,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_4__.ChevronRightIcon, {})\n      }),\n      icon: getIconWithFallback(icon, schemaType, _sanity_icons__WEBPACK_IMPORTED_MODULE_4__.FolderIcon),\n      layout,\n      title\n    });\n  }, [documentPreviewStore, hasSchemaType, icon, layout, schemaType, title, value, documentPresence]);\n  const Link = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => function LinkComponent(linkProps) {\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ChildLink, {\n      ...linkProps,\n      childId: id\n    });\n  }, [ChildLink, id]);\n  const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(e => {\n    if (e.metaKey) {\n      setClicked(false);\n      return;\n    }\n    setClicked(true);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => setClicked(false), [selected]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_5__.PreviewCard, {\n    __unstable_focusRing: true,\n    as: Link,\n    \"data-as\": \"a\",\n    \"data-ui\": \"PaneItem\",\n    margin,\n    marginBottom,\n    marginTop,\n    onClick: handleClick,\n    padding: 2,\n    pressed,\n    radius: 2,\n    selected: selected || clicked,\n    sizing: \"border\",\n    tabIndex: -1,\n    tone: \"inherit\",\n    children: preview\n  });\n}\n\n//# sourceMappingURL=PaneItem-cc425889.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MvUGFuZUl0ZW0tY2M0MjU4ODkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQThDO0FBQ2lEO0FBQzlDO0FBQ2Y7QUFDZ0M7QUFDa0Q7QUFDaEQ7QUFDNUM7QUFDSTtBQUNMO0FBQ3ZCO0FBQ0Esd0JBQXdCLHVEQUFJO0FBQzVCLDJEQUEyRCxzREFBRztBQUM5RDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsMkJBQTJCLHVEQUFJO0FBQy9CLDRDQUE0QyxzREFBRztBQUMvQztBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsOEJBQThCLHNEQUFHLENBQUMsNkRBQWtCLElBQUk7QUFDeEQsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdCQUF3QixzREFBRyxDQUFDLHdEQUFvQjtBQUNoRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osaUJBQWlCLGlEQUFTO0FBQzFCLCtCQUErQiwrREFBdUI7QUFDdEQ7QUFDQTtBQUNBLElBQUksRUFBRSxnRUFBYTtBQUNuQiwyQkFBMkIsMkRBQW1CO0FBQzlDO0FBQ0EsZ0NBQWdDLCtDQUFRO0FBQ3hDLGtCQUFrQiw4Q0FBTztBQUN6QixpQkFBaUIsK0RBQWdCO0FBQ2pDO0FBQ0EsOEJBQThCLHNEQUFHO0FBQ2pDO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNEJBQTRCLHNEQUFHLENBQUMsOERBQWU7QUFDL0M7QUFDQSxvREFBb0QsdURBQVk7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUcsQ0FBQyx3REFBb0I7QUFDbEQsNkJBQTZCLHNEQUFHLENBQUMsNENBQUk7QUFDckM7QUFDQSxpQ0FBaUMsc0RBQUcsQ0FBQywyREFBZ0IsSUFBSTtBQUN6RCxPQUFPO0FBQ1Asa0RBQWtELHFEQUFVO0FBQzVEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILGVBQWUsOENBQU87QUFDdEIsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILHNCQUFzQixrREFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWCx3QkFBd0Isc0RBQUcsQ0FBQywrQ0FBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNvQjtBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzL1BhbmVJdGVtLWNjNDI1ODg5LmpzP2FiZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBqc3hzIH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgV2FybmluZ091dGxpbmVJY29uLCBDaGV2cm9uUmlnaHRJY29uLCBEb2N1bWVudEljb24sIEZvbGRlckljb24gfSBmcm9tICdAc2FuaXR5L2ljb25zJztcbmltcG9ydCB7IGlzU2FuaXR5RG9jdW1lbnQgfSBmcm9tICdAc2FuaXR5L3R5cGVzJztcbmltcG9ydCB7IFRleHQgfSBmcm9tICdAc2FuaXR5L3VpJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2FuaXR5RGVmYXVsdFByZXZpZXcsIHVzZVNjaGVtYSwgdXNlRG9jdW1lbnRQcmV2aWV3U3RvcmUsIHVzZURvY3VtZW50UHJlc2VuY2UsIFByZXZpZXdDYXJkIH0gZnJvbSAnc2FuaXR5JztcbmltcG9ydCB7IHVzZVBhbmVSb3V0ZXIsIFBhbmVJdGVtUHJldmlldyB9IGZyb20gJy4vZGVzay02MjU3OGExNS5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9vbWl0LmpzJztcbmltcG9ydCAnQHNhbml0eS91dGlsL3BhdGhzJztcbmltcG9ydCAnc2FuaXR5L3JvdXRlcic7XG5jb25zdCBnZXRVbmtub3duVHlwZUZhbGxiYWNrID0gKGlkLCB0eXBlTmFtZSkgPT4gKHtcbiAgdGl0bGU6IC8qIEBfX1BVUkVfXyAqL2pzeHMoXCJlbVwiLCB7XG4gICAgY2hpbGRyZW46IFtcIk5vIHNjaGVtYSBmb3VuZCBmb3IgdHlwZSBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICBjaGlsZHJlbjogdHlwZU5hbWVcbiAgICB9KV1cbiAgfSksXG4gIHN1YnRpdGxlOiAvKiBAX19QVVJFX18gKi9qc3hzKFwiZW1cIiwge1xuICAgIGNoaWxkcmVuOiBbXCJEb2N1bWVudDogXCIsIC8qIEBfX1BVUkVfXyAqL2pzeChcImNvZGVcIiwge1xuICAgICAgY2hpbGRyZW46IGlkXG4gICAgfSldXG4gIH0pLFxuICBtZWRpYTogKCkgPT4gLyogQF9fUFVSRV9fICovanN4KFdhcm5pbmdPdXRsaW5lSWNvbiwge30pXG59KTtcbmZ1bmN0aW9uIE1pc3NpbmdTY2hlbWFUeXBlKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBsYXlvdXQsXG4gICAgdmFsdWVcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFNhbml0eURlZmF1bHRQcmV2aWV3LCB7XG4gICAgLi4uZ2V0VW5rbm93blR5cGVGYWxsYmFjayh2YWx1ZS5faWQsIHZhbHVlLl90eXBlKSxcbiAgICBsYXlvdXRcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRJY29uV2l0aEZhbGxiYWNrKGljb24sIHNjaGVtYVR5cGUsIGRlZmF1bHRJY29uKSB7XG4gIGlmIChpY29uID09PSBmYWxzZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaWNvbiB8fCBzY2hlbWFUeXBlICYmIHNjaGVtYVR5cGUuaWNvbiB8fCBkZWZhdWx0SWNvbiB8fCBmYWxzZTtcbn1cbmZ1bmN0aW9uIFBhbmVJdGVtKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpY29uLFxuICAgIGlkLFxuICAgIGxheW91dCA9IFwiZGVmYXVsdFwiLFxuICAgIHByZXNzZWQsXG4gICAgc2NoZW1hVHlwZSxcbiAgICBzZWxlY3RlZCxcbiAgICB0aXRsZSxcbiAgICB2YWx1ZSxcbiAgICBtYXJnaW4sXG4gICAgbWFyZ2luQm90dG9tLFxuICAgIG1hcmdpblRvcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHNjaGVtYSA9IHVzZVNjaGVtYSgpO1xuICBjb25zdCBkb2N1bWVudFByZXZpZXdTdG9yZSA9IHVzZURvY3VtZW50UHJldmlld1N0b3JlKCk7XG4gIGNvbnN0IHtcbiAgICBDaGlsZExpbmtcbiAgfSA9IHVzZVBhbmVSb3V0ZXIoKTtcbiAgY29uc3QgZG9jdW1lbnRQcmVzZW5jZSA9IHVzZURvY3VtZW50UHJlc2VuY2UoaWQpO1xuICBjb25zdCBoYXNTY2hlbWFUeXBlID0gQm9vbGVhbihzY2hlbWFUeXBlICYmIHNjaGVtYVR5cGUubmFtZSAmJiBzY2hlbWEuZ2V0KHNjaGVtYVR5cGUubmFtZSkpO1xuICBjb25zdCBbY2xpY2tlZCwgc2V0Q2xpY2tlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHByZXZpZXcgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodmFsdWUgJiYgaXNTYW5pdHlEb2N1bWVudCh2YWx1ZSkpIHtcbiAgICAgIGlmICghc2NoZW1hVHlwZSB8fCAhaGFzU2NoZW1hVHlwZSkge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KE1pc3NpbmdTY2hlbWFUeXBlLCB7XG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhbmVJdGVtUHJldmlldywge1xuICAgICAgICBkb2N1bWVudFByZXZpZXdTdG9yZSxcbiAgICAgICAgaWNvbjogZ2V0SWNvbldpdGhGYWxsYmFjayhpY29uLCBzY2hlbWFUeXBlLCBEb2N1bWVudEljb24pLFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIHNjaGVtYVR5cGUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBwcmVzZW5jZTogZG9jdW1lbnRQcmVzZW5jZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goU2FuaXR5RGVmYXVsdFByZXZpZXcsIHtcbiAgICAgIHN0YXR1czogLyogQF9fUFVSRV9fICovanN4KFRleHQsIHtcbiAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ2hldnJvblJpZ2h0SWNvbiwge30pXG4gICAgICB9KSxcbiAgICAgIGljb246IGdldEljb25XaXRoRmFsbGJhY2soaWNvbiwgc2NoZW1hVHlwZSwgRm9sZGVySWNvbiksXG4gICAgICBsYXlvdXQsXG4gICAgICB0aXRsZVxuICAgIH0pO1xuICB9LCBbZG9jdW1lbnRQcmV2aWV3U3RvcmUsIGhhc1NjaGVtYVR5cGUsIGljb24sIGxheW91dCwgc2NoZW1hVHlwZSwgdGl0bGUsIHZhbHVlLCBkb2N1bWVudFByZXNlbmNlXSk7XG4gIGNvbnN0IExpbmsgPSB1c2VNZW1vKCgpID0+IGZ1bmN0aW9uIExpbmtDb21wb25lbnQobGlua1Byb3BzKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChDaGlsZExpbmssIHtcbiAgICAgIC4uLmxpbmtQcm9wcyxcbiAgICAgIGNoaWxkSWQ6IGlkXG4gICAgfSk7XG4gIH0sIFtDaGlsZExpbmssIGlkXSk7XG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soZSA9PiB7XG4gICAgaWYgKGUubWV0YUtleSkge1xuICAgICAgc2V0Q2xpY2tlZChmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldENsaWNrZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHNldENsaWNrZWQoZmFsc2UpLCBbc2VsZWN0ZWRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQcmV2aWV3Q2FyZCwge1xuICAgIF9fdW5zdGFibGVfZm9jdXNSaW5nOiB0cnVlLFxuICAgIGFzOiBMaW5rLFxuICAgIFwiZGF0YS1hc1wiOiBcImFcIixcbiAgICBcImRhdGEtdWlcIjogXCJQYW5lSXRlbVwiLFxuICAgIG1hcmdpbixcbiAgICBtYXJnaW5Cb3R0b20sXG4gICAgbWFyZ2luVG9wLFxuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLFxuICAgIHBhZGRpbmc6IDIsXG4gICAgcHJlc3NlZCxcbiAgICByYWRpdXM6IDIsXG4gICAgc2VsZWN0ZWQ6IHNlbGVjdGVkIHx8IGNsaWNrZWQsXG4gICAgc2l6aW5nOiBcImJvcmRlclwiLFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICB0b25lOiBcImluaGVyaXRcIixcbiAgICBjaGlsZHJlbjogcHJldmlld1xuICB9KTtcbn1cbmV4cG9ydCB7IFBhbmVJdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QYW5lSXRlbS1jYzQyNTg4OS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sanity/lib/_chunks/PaneItem-cc425889.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-cdcf967d.js":
/*!***********************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks/index-cdcf967d.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ DocumentListPane; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/index.esm.js\");\n/* harmony import */ var shallow_equals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shallow-equals */ \"(app-pages-browser)/./node_modules/shallow-equals/index.js\");\n/* harmony import */ var shallow_equals__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(shallow_equals__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEqual.js */ \"(app-pages-browser)/./node_modules/lodash/isEqual.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @sanity/icons */ \"(app-pages-browser)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! styled-components */ \"(app-pages-browser)/./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/defer.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/throwError.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/share.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/partition.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/take.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/scheduler/async.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/timer.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/Subject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/tap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/debounce.js\");\n/* harmony import */ var react_rx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-rx */ \"(app-pages-browser)/./node_modules/react-rx/dist/esm/index.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sanity */ \"(app-pages-browser)/./node_modules/sanity/lib/index.esm.js\");\n/* harmony import */ var _desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./desk-62578a15.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/desk-62578a15.js\");\n/* harmony import */ var _index_504fa488_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./index-504fa488.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-504fa488.js\");\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sanity/util/paths */ \"(app-pages-browser)/./node_modules/@sanity/util/lib/paths.esm.js\");\n/* harmony import */ var _sanity_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @sanity/types */ \"(app-pages-browser)/./node_modules/@sanity/types/lib/index.esm.js\");\n/* harmony import */ var _PaneItem_cc425889_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./PaneItem-cc425889.js */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks/PaneItem-cc425889.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/omit.js */ \"(app-pages-browser)/./node_modules/lodash/omit.js\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_omit_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/isNumber.js */ \"(app-pages-browser)/./node_modules/lodash/isNumber.js\");\n/* harmony import */ var lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_isNumber_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash/isString.js */ \"(app-pages-browser)/./node_modules/lodash/isString.js\");\n/* harmony import */ var lodash_isString_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_isString_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/catchError.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_exhaustmap_with_trailing__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs-exhaustmap-with-trailing */ \"(app-pages-browser)/./node_modules/rxjs-exhaustmap-with-trailing/dist/esm/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst PARTIAL_PAGE_LIMIT = 100;\nconst FULL_LIST_LIMIT = 2e3;\nconst DEFAULT_ORDERING = {\n  by: [{\n    field: \"_updatedAt\",\n    direction: \"desc\"\n  }]\n};\nconst EMPTY_RECORD = {};\nfunction removePublishedWithDrafts(documents) {\n  return (0,sanity__WEBPACK_IMPORTED_MODULE_10__.collate)(documents).map(entry => {\n    const doc = entry.draft || entry.published;\n    return {\n      ...doc,\n      hasPublished: !!entry.published,\n      hasDraft: !!entry.draft\n    };\n  });\n}\nconst RE_TYPE_NAME_IN_FILTER = /\\b_type\\s*==\\s*(['\"].*?['\"]|\\$.*?(?:\\s|$))|\\B(['\"].*?['\"]|\\$.*?(?:\\s|$))\\s*==\\s*_type\\b/;\nfunction getTypeNameFromSingleTypeFilter(filter) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const matches = filter.match(RE_TYPE_NAME_IN_FILTER);\n  if (!matches) {\n    return null;\n  }\n  const match = (matches[1] || matches[2]).trim().replace(/^[\"']|[\"']$/g, \"\");\n  if (match[0] === \"$\") {\n    const k = match.slice(1);\n    const v = params[k];\n    return typeof v === \"string\" ? v : null;\n  }\n  return match;\n}\nfunction isSimpleTypeFilter(filter) {\n  return /^_type\\s*==\\s*['\"$]\\w+['\"]?\\s*$/.test(filter.trim());\n}\nfunction applyOrderingFunctions(order, schemaType) {\n  const orderBy = order.by.map(by => {\n    if (by.mapWith) {\n      return by;\n    }\n    const fieldType = tryResolveSchemaTypeForPath(schemaType, by.field);\n    if (!fieldType) {\n      return by;\n    }\n    if (fieldExtendsType(fieldType, \"datetime\")) {\n      return {\n        ...by,\n        mapWith: \"dateTime\"\n      };\n    }\n    if (fieldType.jsonType === \"string\") {\n      return {\n        ...by,\n        mapWith: \"lower\"\n      };\n    }\n    return by;\n  });\n  return orderBy.every((item, index) => item === order.by[index]) ? order : {\n    ...order,\n    by: orderBy\n  };\n}\nfunction tryResolveSchemaTypeForPath(baseType, path) {\n  const pathSegments = _sanity_util_paths__WEBPACK_IMPORTED_MODULE_5__.fromString(path);\n  let current = baseType;\n  for (const segment of pathSegments) {\n    if (!current) {\n      return void 0;\n    }\n    if (typeof segment === \"string\") {\n      current = getFieldTypeByName(current, segment);\n      continue;\n    }\n    const isArrayAccessor = (0,_sanity_types__WEBPACK_IMPORTED_MODULE_11__.isKeySegment)(segment) || (0,_sanity_types__WEBPACK_IMPORTED_MODULE_11__.isIndexSegment)(segment);\n    if (!isArrayAccessor || current.jsonType !== \"array\") {\n      return void 0;\n    }\n    const [memberType, otherType] = current.of || [];\n    if (otherType || !memberType) {\n      return void 0;\n    }\n    if (!(0,_sanity_types__WEBPACK_IMPORTED_MODULE_11__.isReferenceSchemaType)(memberType)) {\n      current = memberType;\n      continue;\n    }\n    const [refType, otherRefType] = memberType.to || [];\n    if (otherRefType || !refType) {\n      return void 0;\n    }\n    current = refType;\n  }\n  return current;\n}\nfunction getFieldTypeByName(type, fieldName) {\n  if (!(\"fields\" in type)) {\n    return void 0;\n  }\n  const fieldType = type.fields.find(field => field.name === fieldName);\n  return fieldType ? fieldType.type : void 0;\n}\nfunction fieldExtendsType(field, ofType) {\n  let current = field.type;\n  while (current) {\n    if (current.name === ofType) {\n      return true;\n    }\n    if (!current.type && current.jsonType === ofType) {\n      return true;\n    }\n    current = current.type;\n  }\n  return false;\n}\nvar __freeze$1 = Object.freeze;\nvar __defProp$1 = Object.defineProperty;\nvar __template$1 = (cooked, raw) => __freeze$1(__defProp$1(cooked, \"raw\", {\n  value: __freeze$1(raw || cooked.slice())\n}));\nvar _a$1, _b$1;\nconst RootBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box)(_a$1 || (_a$1 = __template$1([\"\\n  position: relative;\\n\"])));\nconst CommandListBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box)(_b$1 || (_b$1 = __template$1([\"\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n\"])));\nconst SKELETON_ITEMS = [...Array(30).keys()];\nfunction LoadingView(props) {\n  const {\n    layout\n  } = props;\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Stack, {\n    padding: 2,\n    space: 1,\n    children: SKELETON_ITEMS.map(num => /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Card, {\n      padding: 2,\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.SanityDefaultPreview, {\n        isPlaceholder: true,\n        layout\n      })\n    }, num))\n  });\n}\nfunction DocumentListPaneContent(props) {\n  const {\n    childItemId,\n    error,\n    filterIsSimpleTypeConstraint,\n    hasMaxItems,\n    hasSearchQuery,\n    isActive,\n    isLazyLoading,\n    isLoading,\n    items,\n    layout,\n    loadingVariant,\n    onListChange,\n    onRetry,\n    paneTitle,\n    searchInputElement,\n    showIcons\n  } = props;\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSchema)();\n  const {\n    collapsed: layoutCollapsed\n  } = (0,_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.usePaneLayout)();\n  const {\n    collapsed,\n    index\n  } = (0,_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.usePane)();\n  const [shouldRender, setShouldRender] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const handleEndReached = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isLoading || isLazyLoading || !shouldRender) return;\n    onListChange();\n  }, [isLazyLoading, isLoading, onListChange, shouldRender]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (collapsed) return void 0;\n    const timer = setTimeout(() => {\n      setShouldRender(true);\n    }, 0);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [collapsed, items]);\n  const renderItem = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((item, _ref) => {\n    let {\n      activeIndex\n    } = _ref;\n    const publishedId = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.getPublishedId)(item._id);\n    const isSelected = childItemId === publishedId;\n    const pressed = !isActive && isSelected;\n    const selected = isActive && isSelected;\n    const isLastItem = activeIndex === items.length - 1;\n    const showSpinner = isLastItem && isLazyLoading;\n    const showMaxItemsMessage = isLastItem && hasMaxItems;\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n      children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_PaneItem_cc425889_js__WEBPACK_IMPORTED_MODULE_15__.PaneItem, {\n        icon: showIcons === false ? false : void 0,\n        id: publishedId,\n        layout,\n        marginBottom: 1,\n        pressed,\n        schemaType: schema.get(item._type),\n        selected,\n        value: item\n      }), showSpinner && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Flex, {\n        align: \"center\",\n        justify: \"center\",\n        padding: 4,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Spinner, {\n          muted: true\n        })\n      }), showMaxItemsMessage && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box, {\n        marginY: 1,\n        paddingX: 3,\n        paddingY: 4,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Text, {\n          align: \"center\",\n          muted: true,\n          size: 1,\n          children: [\"Displaying a maximum of \", FULL_LIST_LIMIT, \" documents\"]\n        })\n      })]\n    });\n  }, [childItemId, isActive, items.length, layout, schema, showIcons, hasMaxItems, isLazyLoading]);\n  const noDocumentsContent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (hasSearchQuery) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Flex, {\n        align: \"center\",\n        direction: \"column\",\n        height: \"fill\",\n        justify: \"center\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Container, {\n          width: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box, {\n            paddingX: 4,\n            paddingY: 5,\n            children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Text, {\n              align: \"center\",\n              muted: true,\n              children: \"No results found\"\n            })\n          })\n        })\n      });\n    }\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Flex, {\n      align: \"center\",\n      direction: \"column\",\n      height: \"fill\",\n      justify: \"center\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Container, {\n        width: 1,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box, {\n          paddingX: 4,\n          paddingY: 5,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Text, {\n            align: \"center\",\n            muted: true,\n            children: filterIsSimpleTypeConstraint ? \"No documents of this type\" : \"No matching documents\"\n          })\n        })\n      })\n    });\n  }, [filterIsSimpleTypeConstraint, hasSearchQuery]);\n  const mainContent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (!shouldRender) {\n      return null;\n    }\n    if (error) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Flex, {\n        align: \"center\",\n        direction: \"column\",\n        height: \"fill\",\n        justify: \"center\",\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Container, {\n          width: 1,\n          children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Stack, {\n            paddingX: 4,\n            paddingY: 5,\n            space: 4,\n            children: [/* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Heading, {\n              as: \"h3\",\n              children: \"Could not fetch list items\"\n            }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Text, {\n              as: \"p\",\n              children: [\"Error: \", /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", {\n                children: error.message\n              })]\n            }), onRetry && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box, {\n              children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Button, {\n                icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_16__.SyncIcon,\n                onClick: onRetry,\n                text: \"Retry\",\n                tone: \"primary\"\n              })\n            })]\n          })\n        })\n      });\n    }\n    if (!isLoading && items.length === 0) {\n      return noDocumentsContent;\n    }\n    if (loadingVariant === \"initial\" && isLoading) {\n      return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.Delay, {\n        ms: 300,\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingView, {\n          layout\n        })\n      });\n    }\n    if (loadingVariant === \"spinner\" && isLoading) {\n      return null;\n    }\n    const key = \"\".concat(index, \"-\").concat(collapsed);\n    return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RootBox, {\n      overflow: \"hidden\",\n      height: \"fill\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CommandListBox, {\n        children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.CommandList, {\n          activeItemDataAttr: \"data-hovered\",\n          ariaLabel: paneTitle,\n          canReceiveFocus: true,\n          focusRingOffset: -3,\n          inputElement: searchInputElement,\n          itemHeight: 51,\n          items,\n          onEndReached: handleEndReached,\n          onlyShowSelectionWhenActive: true,\n          overscan: 10,\n          padding: 2,\n          paddingBottom: 1,\n          renderItem,\n          wrapAround: false\n        }, key)\n      })\n    });\n  }, [collapsed, error, handleEndReached, index, isLoading, items, layout, loadingVariant,\n  // noDocumentsContent,\n  onRetry, renderItem, searchInputElement, shouldRender]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.PaneContent, {\n    overflow: layoutCollapsed || loadingVariant === \"initial\" ? \"hidden\" : \"auto\",\n    children: mainContent\n  });\n}\nconst DocumentListPaneHeader = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(_ref2 => {\n  let {\n    contentAfter,\n    index,\n    initialValueTemplates = [],\n    menuItemGroups = [],\n    menuItems = [],\n    setLayout,\n    setSortOrder,\n    title\n  } = _ref2;\n  const {\n    features\n  } = (0,_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.useDeskTool)();\n  const {\n    collapsed,\n    isLast\n  } = (0,_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.usePane)();\n  const tabIndex = isLast && !collapsed ? -1 : 0;\n  const actionHandlers = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return {\n      setLayout: _ref3 => {\n        let {\n          layout: value\n        } = _ref3;\n        setLayout(value);\n      },\n      setSortOrder: sort => {\n        setSortOrder(sort);\n      }\n    };\n  }, [setLayout, setSortOrder]);\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.PaneHeader, {\n    actions: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.PaneHeaderActions, {\n      initialValueTemplateItems: initialValueTemplates,\n      actionHandlers,\n      menuItemGroups,\n      menuItems\n    }),\n    backButton: features.backButton && index > 0 && /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Button, {\n      as: _desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.BackLink,\n      \"data-as\": \"a\",\n      icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_16__.ArrowLeftIcon,\n      mode: \"bleed\"\n    }),\n    contentAfter,\n    tabIndex,\n    title\n  });\n});\nDocumentListPaneHeader.displayName = \"DocumentListPaneHeader\";\nfunction listenSearchQuery(options) {\n  const {\n    client,\n    schema,\n    sort,\n    limit,\n    params,\n    filter,\n    searchQuery,\n    staticTypeNames\n  } = options;\n  const sortBy = sort.by;\n  const extendedProjection = sort == null ? void 0 : sort.extendedProjection;\n  const events$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.defer)(() => {\n    return client.listen(\"*[\".concat(filter, \"]\"), params, {\n      events: [\"welcome\", \"mutation\", \"reconnect\"],\n      includeResult: false,\n      visibility: \"query\"\n    });\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.mergeMap)((ev, i) => {\n    const isFirst = i === 0;\n    if (isFirst && ev.type !== \"welcome\") {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.throwError)(() => new Error(ev.type === \"reconnect\" ? \"Could not establish EventSource connection\" : 'Received unexpected type of first event \"'.concat(ev.type, '\"')));\n    }\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.of)(ev);\n  }), (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.share)());\n  const [welcome$, mutationAndReconnect$] = (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.partition)(events$, ev => ev.type === \"welcome\");\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.merge)(welcome$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_24__.take)(1)), mutationAndReconnect$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_25__.throttleTime)(1e3, rxjs__WEBPACK_IMPORTED_MODULE_26__.asyncScheduler, {\n    leading: true,\n    trailing: true\n  }))).pipe((0,rxjs_exhaustmap_with_trailing__WEBPACK_IMPORTED_MODULE_9__.exhaustMapWithTrailing)(event => {\n    const typeNames$ = staticTypeNames ? (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.of)(staticTypeNames) : client.observable.fetch(\"array::unique(*[\".concat(filter, \"][]._type)\"), params);\n    return typeNames$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.mergeMap)(typeNames => {\n      const types = typeNames.flatMap(name => schema.get(name) || []);\n      const searchTerms = {\n        filter,\n        query: searchQuery || \"\",\n        types\n      };\n      const searchOptions = {\n        __unstable_extendedProjection: extendedProjection,\n        comments: [\"findability-source: \".concat(searchQuery ? \"list-query\" : \"list\")],\n        limit,\n        params,\n        sort: sortBy\n      };\n      const {\n        query: createdQuery,\n        params: createdParams\n      } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.createSearchQuery)(searchTerms, searchOptions);\n      const doFetch = () => client.observable.fetch(createdQuery, createdParams);\n      if (event.type === \"mutation\" && event.visibility !== \"query\") {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.timer)(1200).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.mergeMap)(doFetch));\n      }\n      return doFetch();\n    }));\n  }));\n}\nconst EMPTY_ARRAY$1 = [];\nconst INITIAL_STATE = {\n  error: null,\n  onRetry: void 0,\n  result: null\n};\nconst INITIAL_QUERY_RESULTS = {\n  result: null,\n  error: null\n};\nfunction useDocumentList(opts) {\n  const {\n    filter,\n    params: paramsProp,\n    sortOrder,\n    searchQuery,\n    apiVersion\n  } = opts;\n  const client = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useClient)({\n    ...sanity__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_STUDIO_CLIENT_OPTIONS,\n    apiVersion: apiVersion || sanity__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion\n  });\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSchema)();\n  const [resultState, setResult] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(INITIAL_STATE);\n  const {\n    onRetry,\n    error,\n    result\n  } = resultState;\n  const documents = result == null ? void 0 : result.documents;\n  const items = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => documents ? removePublishedWithDrafts(documents) : EMPTY_ARRAY$1, [documents]);\n  const [isLazyLoading, setIsLazyLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [hasFullList, setHasFullList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [shouldFetchFullList, setShouldFetchFullList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const typeNameFromFilter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => getTypeNameFromSingleTypeFilter(filter, paramsProp), [filter, paramsProp]);\n  const isLoading = result === null && !error;\n  const hasMaxItems = (documents == null ? void 0 : documents.length) === FULL_LIST_LIMIT;\n  const onListChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (isLoading || hasFullList || shouldFetchFullList) return;\n    setShouldFetchFullList(true);\n  }, [isLoading, hasFullList, shouldFetchFullList]);\n  const handleSetResult = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(res => {\n    var _a, _b;\n    if (res.error) {\n      setResult(res);\n      return;\n    }\n    const documentsLength = ((_b = (_a = res.result) == null ? void 0 : _a.documents) == null ? void 0 : _b.length) || 0;\n    const isLoadingMoreItems = !res.error && (res == null ? void 0 : res.result) === null && shouldFetchFullList;\n    if (isLoadingMoreItems) {\n      setIsLazyLoading(true);\n      return;\n    }\n    if (documentsLength < PARTIAL_PAGE_LIMIT && documentsLength !== 0 && !shouldFetchFullList) {\n      setHasFullList(true);\n    }\n    if ((res == null ? void 0 : res.result) === null) {\n      setResult(prev => ({\n        ...(prev.error ? res : prev)\n      }));\n      return;\n    }\n    setIsLazyLoading(false);\n    setResult(res);\n  }, [shouldFetchFullList]);\n  const queryResults$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const onRetry$ = new rxjs__WEBPACK_IMPORTED_MODULE_28__.Subject();\n    const _onRetry = () => onRetry$.next();\n    const limit = shouldFetchFullList ? FULL_LIST_LIMIT : PARTIAL_PAGE_LIMIT;\n    const sort = sortOrder || DEFAULT_ORDERING;\n    return listenSearchQuery({\n      client,\n      filter,\n      limit,\n      params: paramsProp,\n      schema,\n      searchQuery: searchQuery || \"\",\n      sort,\n      staticTypeNames: typeNameFromFilter ? [typeNameFromFilter] : void 0\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.map)(results => ({\n      result: {\n        documents: results\n      },\n      error: null\n    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_30__.startWith)(INITIAL_QUERY_RESULTS), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.catchError)(err => {\n      if (err instanceof ProgressEvent) {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.throwError)(() => new Error(\"Request error\"));\n      }\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.throwError)(() => err);\n    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.catchError)((err, caught$) => {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_20__.of)({\n        result: null,\n        error: err\n      }), (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.merge)((0,rxjs__WEBPACK_IMPORTED_MODULE_33__.fromEvent)(window, \"online\"), onRetry$).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_24__.take)(1), (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.mergeMap)(() => caught$)));\n    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_34__.scan)((prev, next) => ({\n      ...prev,\n      ...next,\n      onRetry: _onRetry\n    })));\n  }, [client, filter, paramsProp, schema, searchQuery, shouldFetchFullList, sortOrder, typeNameFromFilter]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const sub = queryResults$.subscribe(handleSetResult);\n    return () => {\n      sub.unsubscribe();\n    };\n  }, [handleSetResult, queryResults$]);\n  const reset = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setHasFullList(false);\n    setIsLazyLoading(false);\n    setResult(INITIAL_STATE);\n    setShouldFetchFullList(false);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    reset();\n  }, [reset, filter, paramsProp, sortOrder, searchQuery]);\n  return {\n    error,\n    hasMaxItems,\n    isLazyLoading,\n    isLoading,\n    isSearchReady: !error,\n    items,\n    onListChange,\n    onRetry\n  };\n}\nvar __freeze = Object.freeze;\nvar __defProp = Object.defineProperty;\nvar __template = (cooked, raw) => __freeze(__defProp(cooked, \"raw\", {\n  value: __freeze(raw || cooked.slice())\n}));\nvar _a, _b, _c;\nconst EMPTY_ARRAY = [];\nconst rotate = (0,styled_components__WEBPACK_IMPORTED_MODULE_12__.keyframes)(_a || (_a = __template([\"\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n\"])));\nconst AnimatedSpinnerIcon = (0,styled_components__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(_sanity_icons__WEBPACK_IMPORTED_MODULE_16__.SpinnerIcon)(_b || (_b = __template([\"\\n  animation: \", \" 500ms linear infinite;\\n\"])), rotate);\nconst SearchCard = (0,styled_components__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Card)(_c || (_c = __template([\"\\n  [data-ui='TextInput'] {\\n    border-radius: inherit;\\n  }\\n\"])));\nfunction useShallowUnique(value) {\n  const valueRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);\n  if (!shallow_equals__WEBPACK_IMPORTED_MODULE_2___default()(valueRef.current, value)) {\n    valueRef.current = value;\n  }\n  return valueRef.current;\n}\nconst addSelectedStateToMenuItems = options => {\n  const {\n    menuItems,\n    sortOrderRaw,\n    layout\n  } = options;\n  return menuItems == null ? void 0 : menuItems.map(item => {\n    var _a2, _b2, _c2, _d;\n    if ((_a2 = item.params) == null ? void 0 : _a2.layout) {\n      return {\n        ...item,\n        selected: layout === ((_b2 = item.params) == null ? void 0 : _b2.layout)\n      };\n    }\n    if ((_c2 = item == null ? void 0 : item.params) == null ? void 0 : _c2.by) {\n      return {\n        ...item,\n        selected: lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_3___default()(sortOrderRaw == null ? void 0 : sortOrderRaw.by, ((_d = item == null ? void 0 : item.params) == null ? void 0 : _d.by) || EMPTY_ARRAY)\n      };\n    }\n    return {\n      ...item,\n      selected: false\n    };\n  });\n};\nconst DocumentListPane = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function DocumentListPane2(props) {\n  const {\n    childItemId,\n    index,\n    isActive,\n    isSelected,\n    pane,\n    paneKey\n  } = props;\n  const schema = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSchema)();\n  const {\n    name: parentSourceName\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSource)();\n  const {\n    defaultLayout = \"default\",\n    displayOptions,\n    initialValueTemplates = EMPTY_ARRAY,\n    menuItemGroups,\n    menuItems,\n    options,\n    title\n  } = pane;\n  const {\n    apiVersion,\n    defaultOrdering = EMPTY_ARRAY,\n    filter\n  } = options;\n  const params = useShallowUnique(options.params || EMPTY_RECORD);\n  const sourceName = pane.source;\n  const typeName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => getTypeNameFromSingleTypeFilter(filter, params), [filter, params]);\n  const showIcons = (displayOptions == null ? void 0 : displayOptions.showIcons) !== false;\n  const [layout, setLayout] = (0,_index_504fa488_js__WEBPACK_IMPORTED_MODULE_35__.useDeskToolSetting)(typeName, \"layout\", defaultLayout);\n  const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n  const [searchInputValue, setSearchInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n  const [searchInputElement, setSearchInputElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const showSearchLoadingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n  const defaultSortOrder = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    return (defaultOrdering == null ? void 0 : defaultOrdering.length) > 0 ? {\n      by: defaultOrdering\n    } : DEFAULT_ORDERING;\n  }, [defaultOrdering]);\n  const [sortOrderRaw, setSortOrder] = (0,_index_504fa488_js__WEBPACK_IMPORTED_MODULE_35__.useDeskToolSetting)(typeName, \"sortOrder\", defaultSortOrder);\n  const sortWithOrderingFn = typeName && sortOrderRaw ? applyOrderingFunctions(sortOrderRaw, schema.get(typeName)) : sortOrderRaw;\n  const sortOrder = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useUnique)(sortWithOrderingFn);\n  const filterIsSimpleTypeConstraint = isSimpleTypeFilter(filter);\n  const {\n    error,\n    hasMaxItems,\n    isLazyLoading,\n    isLoading,\n    isSearchReady,\n    items,\n    onListChange,\n    onRetry\n  } = useDocumentList({\n    apiVersion,\n    filter,\n    params,\n    searchQuery: searchQuery == null ? void 0 : searchQuery.trim(),\n    sortOrder\n  });\n  const menuItemsWithSelectedState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => addSelectedStateToMenuItems({\n    menuItems,\n    sortOrderRaw,\n    layout\n  }), [layout, menuItems, sortOrderRaw]);\n  const handleQueryChange = (0,react_rx__WEBPACK_IMPORTED_MODULE_4__.useObservableCallback)(event$ => {\n    return event$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.map)(event => event.target.value), (0,rxjs__WEBPACK_IMPORTED_MODULE_36__.tap)(setSearchInputValue), (0,rxjs__WEBPACK_IMPORTED_MODULE_37__.debounce)(value => value === \"\" ? (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.of)(\"\") : (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.timer)(300)), (0,rxjs__WEBPACK_IMPORTED_MODULE_36__.tap)(setSearchQuery));\n  }, []);\n  const handleClearSearch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setSearchQuery(\"\");\n    setSearchInputValue(\"\");\n  }, []);\n  const handleSearchKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(event => {\n    if (event.key === \"Escape\") {\n      handleClearSearch();\n    }\n  }, [handleClearSearch]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (showSearchLoadingRef.current === false && !isLoading) {\n      showSearchLoadingRef.current = true;\n    }\n    return () => {\n      showSearchLoadingRef.current = false;\n    };\n  }, [isLoading]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    handleClearSearch();\n    showSearchLoadingRef.current = false;\n  }, [paneKey, handleClearSearch]);\n  const loadingVariant = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    const showSpinner = isLoading && items.length === 0 && showSearchLoadingRef.current;\n    if (showSpinner) return \"spinner\";\n    return \"initial\";\n  }, [isLoading, items.length]);\n  const searchInput = /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.Box, {\n    paddingX: 2,\n    paddingBottom: 2,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SearchCard, {\n      radius: 4,\n      tone: \"transparent\",\n      children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_13__.TextInput, {\n        \"aria-label\": \"Search list\",\n        autoComplete: \"off\",\n        border: false,\n        clearButton: Boolean(searchQuery),\n        disabled: !isSearchReady,\n        fontSize: [2, 2, 1],\n        icon: loadingVariant === \"spinner\" ? AnimatedSpinnerIcon : _sanity_icons__WEBPACK_IMPORTED_MODULE_16__.SearchIcon,\n        onChange: handleQueryChange,\n        onClear: handleClearSearch,\n        onKeyDown: handleSearchKeyDown,\n        placeholder: \"Search list\",\n        radius: 2,\n        ref: setSearchInputElement,\n        spellCheck: false,\n        value: searchInputValue\n      })\n    })\n  });\n  return /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.SourceProvider, {\n    name: sourceName || parentSourceName,\n    children: /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__.Pane, {\n      currentMaxWidth: 350,\n      \"data-ui\": \"DocumentListPane\",\n      id: paneKey,\n      maxWidth: 640,\n      minWidth: 320,\n      selected: isSelected,\n      children: [_desk_62578a15_js__WEBPACK_IMPORTED_MODULE_14__._DEBUG, /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentListPaneHeader, {\n        contentAfter: searchInput,\n        index,\n        initialValueTemplates,\n        menuItemGroups,\n        menuItems: menuItemsWithSelectedState,\n        setLayout,\n        setSortOrder,\n        title\n      }), /* @__PURE__ */(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentListPaneContent, {\n        childItemId,\n        error,\n        filterIsSimpleTypeConstraint,\n        hasMaxItems,\n        hasSearchQuery: Boolean(searchQuery),\n        isActive,\n        isLazyLoading,\n        isLoading,\n        items,\n        layout,\n        loadingVariant,\n        onListChange,\n        onRetry,\n        paneTitle: title,\n        searchInputElement,\n        showIcons\n      }, paneKey)]\n    })\n  });\n});\n\n//# sourceMappingURL=index-cdcf967d.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MvaW5kZXgtY2RjZjk2N2QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ3dCO0FBQzBCO0FBQy9EO0FBQ0g7QUFDeUM7QUFDM0I7QUFDOEg7QUFDbkk7QUFDaUo7QUFDM0s7QUFDNkg7QUFDM0Y7QUFDVDtBQUNvQztBQUNsQztBQUMxQjtBQUNJO0FBQ0E7QUFDOEU7QUFDbkM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0RBQU87QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBEQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQVksYUFBYSw4REFBYztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUVBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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L3Nhbml0eS9saWIvX2NodW5rcy9pbmRleC1jZGNmOTY3ZC5qcz8zNmQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeHMsIEZyYWdtZW50LCBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgbWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQm94LCBGbGV4LCBTcGlubmVyLCBUZXh0LCBDb250YWluZXIsIFN0YWNrLCBIZWFkaW5nLCBCdXR0b24sIENhcmQsIFRleHRJbnB1dCB9IGZyb20gJ0BzYW5pdHkvdWknO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoL2lzRXF1YWwuanMnO1xuaW1wb3J0IHsgU3luY0ljb24sIEFycm93TGVmdEljb24sIFNwaW5uZXJJY29uLCBTZWFyY2hJY29uIH0gZnJvbSAnQHNhbml0eS9pY29ucyc7XG5pbXBvcnQgc3R5bGVkLCB7IGtleWZyYW1lcyB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7IGRlZmVyLCBtZXJnZU1hcCwgdGhyb3dFcnJvciwgb2YsIHNoYXJlLCBwYXJ0aXRpb24sIG1lcmdlLCB0YWtlLCB0aHJvdHRsZVRpbWUsIGFzeW5jU2NoZWR1bGVyLCB0aW1lciwgU3ViamVjdCwgY29uY2F0LCBmcm9tRXZlbnQsIG1hcCBhcyBtYXAkMSwgdGFwLCBkZWJvdW5jZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdXNlT2JzZXJ2YWJsZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QtcngnO1xuaW1wb3J0IHsgY29sbGF0ZSwgdXNlU2NoZW1hLCBnZXRQdWJsaXNoZWRJZCwgQ29tbWFuZExpc3QsIFNhbml0eURlZmF1bHRQcmV2aWV3LCBjcmVhdGVTZWFyY2hRdWVyeSwgdXNlQ2xpZW50LCBERUZBVUxUX1NUVURJT19DTElFTlRfT1BUSU9OUywgdXNlU291cmNlLCB1c2VVbmlxdWUsIFNvdXJjZVByb3ZpZGVyIH0gZnJvbSAnc2FuaXR5JztcbmltcG9ydCAnc2FuaXR5L3JvdXRlcic7XG5pbXBvcnQgeyB1c2VQYW5lTGF5b3V0LCB1c2VQYW5lLCBEZWxheSwgUGFuZUNvbnRlbnQsIHVzZURlc2tUb29sLCBQYW5lSGVhZGVyLCBQYW5lSGVhZGVyQWN0aW9ucywgQmFja0xpbmssIFBhbmUsIF9ERUJVRyB9IGZyb20gJy4vZGVzay02MjU3OGExNS5qcyc7XG5pbXBvcnQgeyB1c2VEZXNrVG9vbFNldHRpbmcgfSBmcm9tICcuL2luZGV4LTUwNGZhNDg4LmpzJztcbmltcG9ydCAqIGFzIFBhdGhVdGlscyBmcm9tICdAc2FuaXR5L3V0aWwvcGF0aHMnO1xuaW1wb3J0IHsgaXNLZXlTZWdtZW50LCBpc0luZGV4U2VnbWVudCwgaXNSZWZlcmVuY2VTY2hlbWFUeXBlIH0gZnJvbSAnQHNhbml0eS90eXBlcyc7XG5pbXBvcnQgeyBQYW5lSXRlbSB9IGZyb20gJy4vUGFuZUl0ZW0tY2M0MjU4ODkuanMnO1xuaW1wb3J0ICdsb2Rhc2gvb21pdC5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9pc051bWJlci5qcyc7XG5pbXBvcnQgJ2xvZGFzaC9pc1N0cmluZy5qcyc7XG5pbXBvcnQgeyBtYXAsIHN0YXJ0V2l0aCwgY2F0Y2hFcnJvciwgdGFrZSBhcyB0YWtlJDEsIG1lcmdlTWFwIGFzIG1lcmdlTWFwJDEsIHNjYW4gfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBleGhhdXN0TWFwV2l0aFRyYWlsaW5nIH0gZnJvbSAncnhqcy1leGhhdXN0bWFwLXdpdGgtdHJhaWxpbmcnO1xuY29uc3QgUEFSVElBTF9QQUdFX0xJTUlUID0gMTAwO1xuY29uc3QgRlVMTF9MSVNUX0xJTUlUID0gMmUzO1xuY29uc3QgREVGQVVMVF9PUkRFUklORyA9IHtcbiAgYnk6IFt7XG4gICAgZmllbGQ6IFwiX3VwZGF0ZWRBdFwiLFxuICAgIGRpcmVjdGlvbjogXCJkZXNjXCJcbiAgfV1cbn07XG5jb25zdCBFTVBUWV9SRUNPUkQgPSB7fTtcbmZ1bmN0aW9uIHJlbW92ZVB1Ymxpc2hlZFdpdGhEcmFmdHMoZG9jdW1lbnRzKSB7XG4gIHJldHVybiBjb2xsYXRlKGRvY3VtZW50cykubWFwKGVudHJ5ID0+IHtcbiAgICBjb25zdCBkb2MgPSBlbnRyeS5kcmFmdCB8fCBlbnRyeS5wdWJsaXNoZWQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRvYyxcbiAgICAgIGhhc1B1Ymxpc2hlZDogISFlbnRyeS5wdWJsaXNoZWQsXG4gICAgICBoYXNEcmFmdDogISFlbnRyeS5kcmFmdFxuICAgIH07XG4gIH0pO1xufVxuY29uc3QgUkVfVFlQRV9OQU1FX0lOX0ZJTFRFUiA9IC9cXGJfdHlwZVxccyo9PVxccyooWydcIl0uKj9bJ1wiXXxcXCQuKj8oPzpcXHN8JCkpfFxcQihbJ1wiXS4qP1snXCJdfFxcJC4qPyg/Olxcc3wkKSlcXHMqPT1cXHMqX3R5cGVcXGIvO1xuZnVuY3Rpb24gZ2V0VHlwZU5hbWVGcm9tU2luZ2xlVHlwZUZpbHRlcihmaWx0ZXIpIHtcbiAgbGV0IHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gIGNvbnN0IG1hdGNoZXMgPSBmaWx0ZXIubWF0Y2goUkVfVFlQRV9OQU1FX0lOX0ZJTFRFUik7XG4gIGlmICghbWF0Y2hlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG1hdGNoID0gKG1hdGNoZXNbMV0gfHwgbWF0Y2hlc1syXSkudHJpbSgpLnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgXCJcIik7XG4gIGlmIChtYXRjaFswXSA9PT0gXCIkXCIpIHtcbiAgICBjb25zdCBrID0gbWF0Y2guc2xpY2UoMSk7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgPyB2IDogbnVsbDtcbiAgfVxuICByZXR1cm4gbWF0Y2g7XG59XG5mdW5jdGlvbiBpc1NpbXBsZVR5cGVGaWx0ZXIoZmlsdGVyKSB7XG4gIHJldHVybiAvXl90eXBlXFxzKj09XFxzKlsnXCIkXVxcdytbJ1wiXT9cXHMqJC8udGVzdChmaWx0ZXIudHJpbSgpKTtcbn1cbmZ1bmN0aW9uIGFwcGx5T3JkZXJpbmdGdW5jdGlvbnMob3JkZXIsIHNjaGVtYVR5cGUpIHtcbiAgY29uc3Qgb3JkZXJCeSA9IG9yZGVyLmJ5Lm1hcChieSA9PiB7XG4gICAgaWYgKGJ5Lm1hcFdpdGgpIHtcbiAgICAgIHJldHVybiBieTtcbiAgICB9XG4gICAgY29uc3QgZmllbGRUeXBlID0gdHJ5UmVzb2x2ZVNjaGVtYVR5cGVGb3JQYXRoKHNjaGVtYVR5cGUsIGJ5LmZpZWxkKTtcbiAgICBpZiAoIWZpZWxkVHlwZSkge1xuICAgICAgcmV0dXJuIGJ5O1xuICAgIH1cbiAgICBpZiAoZmllbGRFeHRlbmRzVHlwZShmaWVsZFR5cGUsIFwiZGF0ZXRpbWVcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJ5LFxuICAgICAgICBtYXBXaXRoOiBcImRhdGVUaW1lXCJcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChmaWVsZFR5cGUuanNvblR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJ5LFxuICAgICAgICBtYXBXaXRoOiBcImxvd2VyXCJcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBieTtcbiAgfSk7XG4gIHJldHVybiBvcmRlckJ5LmV2ZXJ5KChpdGVtLCBpbmRleCkgPT4gaXRlbSA9PT0gb3JkZXIuYnlbaW5kZXhdKSA/IG9yZGVyIDoge1xuICAgIC4uLm9yZGVyLFxuICAgIGJ5OiBvcmRlckJ5XG4gIH07XG59XG5mdW5jdGlvbiB0cnlSZXNvbHZlU2NoZW1hVHlwZUZvclBhdGgoYmFzZVR5cGUsIHBhdGgpIHtcbiAgY29uc3QgcGF0aFNlZ21lbnRzID0gUGF0aFV0aWxzLmZyb21TdHJpbmcocGF0aCk7XG4gIGxldCBjdXJyZW50ID0gYmFzZVR5cGU7XG4gIGZvciAoY29uc3Qgc2VnbWVudCBvZiBwYXRoU2VnbWVudHMpIHtcbiAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VnbWVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY3VycmVudCA9IGdldEZpZWxkVHlwZUJ5TmFtZShjdXJyZW50LCBzZWdtZW50KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBpc0FycmF5QWNjZXNzb3IgPSBpc0tleVNlZ21lbnQoc2VnbWVudCkgfHwgaXNJbmRleFNlZ21lbnQoc2VnbWVudCk7XG4gICAgaWYgKCFpc0FycmF5QWNjZXNzb3IgfHwgY3VycmVudC5qc29uVHlwZSAhPT0gXCJhcnJheVwiKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCBbbWVtYmVyVHlwZSwgb3RoZXJUeXBlXSA9IGN1cnJlbnQub2YgfHwgW107XG4gICAgaWYgKG90aGVyVHlwZSB8fCAhbWVtYmVyVHlwZSkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKCFpc1JlZmVyZW5jZVNjaGVtYVR5cGUobWVtYmVyVHlwZSkpIHtcbiAgICAgIGN1cnJlbnQgPSBtZW1iZXJUeXBlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IFtyZWZUeXBlLCBvdGhlclJlZlR5cGVdID0gbWVtYmVyVHlwZS50byB8fCBbXTtcbiAgICBpZiAob3RoZXJSZWZUeXBlIHx8ICFyZWZUeXBlKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjdXJyZW50ID0gcmVmVHlwZTtcbiAgfVxuICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGdldEZpZWxkVHlwZUJ5TmFtZSh0eXBlLCBmaWVsZE5hbWUpIHtcbiAgaWYgKCEoXCJmaWVsZHNcIiBpbiB0eXBlKSkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgZmllbGRUeXBlID0gdHlwZS5maWVsZHMuZmluZChmaWVsZCA9PiBmaWVsZC5uYW1lID09PSBmaWVsZE5hbWUpO1xuICByZXR1cm4gZmllbGRUeXBlID8gZmllbGRUeXBlLnR5cGUgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBmaWVsZEV4dGVuZHNUeXBlKGZpZWxkLCBvZlR5cGUpIHtcbiAgbGV0IGN1cnJlbnQgPSBmaWVsZC50eXBlO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChjdXJyZW50Lm5hbWUgPT09IG9mVHlwZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghY3VycmVudC50eXBlICYmIGN1cnJlbnQuanNvblR5cGUgPT09IG9mVHlwZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50LnR5cGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxudmFyIF9fZnJlZXplJDEgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fdGVtcGxhdGUkMSA9IChjb29rZWQsIHJhdykgPT4gX19mcmVlemUkMShfX2RlZlByb3AkMShjb29rZWQsIFwicmF3XCIsIHtcbiAgdmFsdWU6IF9fZnJlZXplJDEocmF3IHx8IGNvb2tlZC5zbGljZSgpKVxufSkpO1xudmFyIF9hJDEsIF9iJDE7XG5jb25zdCBSb290Qm94ID0gc3R5bGVkKEJveCkoX2EkMSB8fCAoX2EkMSA9IF9fdGVtcGxhdGUkMShbXCJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG5cIl0pKSk7XG5jb25zdCBDb21tYW5kTGlzdEJveCA9IHN0eWxlZChCb3gpKF9iJDEgfHwgKF9iJDEgPSBfX3RlbXBsYXRlJDEoW1wiXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgcmlnaHQ6IDA7XFxuICB0b3A6IDA7XFxuICBib3R0b206IDA7XFxuXCJdKSkpO1xuY29uc3QgU0tFTEVUT05fSVRFTVMgPSBbLi4uQXJyYXkoMzApLmtleXMoKV07XG5mdW5jdGlvbiBMb2FkaW5nVmlldyhwcm9wcykge1xuICBjb25zdCB7XG4gICAgbGF5b3V0XG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChTdGFjaywge1xuICAgIHBhZGRpbmc6IDIsXG4gICAgc3BhY2U6IDEsXG4gICAgY2hpbGRyZW46IFNLRUxFVE9OX0lURU1TLm1hcChudW0gPT4gLyogQF9fUFVSRV9fICovanN4KENhcmQsIHtcbiAgICAgIHBhZGRpbmc6IDIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFNhbml0eURlZmF1bHRQcmV2aWV3LCB7XG4gICAgICAgIGlzUGxhY2Vob2xkZXI6IHRydWUsXG4gICAgICAgIGxheW91dFxuICAgICAgfSlcbiAgICB9LCBudW0pKVxuICB9KTtcbn1cbmZ1bmN0aW9uIERvY3VtZW50TGlzdFBhbmVDb250ZW50KHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZEl0ZW1JZCxcbiAgICBlcnJvcixcbiAgICBmaWx0ZXJJc1NpbXBsZVR5cGVDb25zdHJhaW50LFxuICAgIGhhc01heEl0ZW1zLFxuICAgIGhhc1NlYXJjaFF1ZXJ5LFxuICAgIGlzQWN0aXZlLFxuICAgIGlzTGF6eUxvYWRpbmcsXG4gICAgaXNMb2FkaW5nLFxuICAgIGl0ZW1zLFxuICAgIGxheW91dCxcbiAgICBsb2FkaW5nVmFyaWFudCxcbiAgICBvbkxpc3RDaGFuZ2UsXG4gICAgb25SZXRyeSxcbiAgICBwYW5lVGl0bGUsXG4gICAgc2VhcmNoSW5wdXRFbGVtZW50LFxuICAgIHNob3dJY29uc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHNjaGVtYSA9IHVzZVNjaGVtYSgpO1xuICBjb25zdCB7XG4gICAgY29sbGFwc2VkOiBsYXlvdXRDb2xsYXBzZWRcbiAgfSA9IHVzZVBhbmVMYXlvdXQoKTtcbiAgY29uc3Qge1xuICAgIGNvbGxhcHNlZCxcbiAgICBpbmRleFxuICB9ID0gdXNlUGFuZSgpO1xuICBjb25zdCBbc2hvdWxkUmVuZGVyLCBzZXRTaG91bGRSZW5kZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBoYW5kbGVFbmRSZWFjaGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpc0xvYWRpbmcgfHwgaXNMYXp5TG9hZGluZyB8fCAhc2hvdWxkUmVuZGVyKSByZXR1cm47XG4gICAgb25MaXN0Q2hhbmdlKCk7XG4gIH0sIFtpc0xhenlMb2FkaW5nLCBpc0xvYWRpbmcsIG9uTGlzdENoYW5nZSwgc2hvdWxkUmVuZGVyXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbGxhcHNlZCkgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0U2hvdWxkUmVuZGVyKHRydWUpO1xuICAgIH0sIDApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH07XG4gIH0sIFtjb2xsYXBzZWQsIGl0ZW1zXSk7XG4gIGNvbnN0IHJlbmRlckl0ZW0gPSB1c2VDYWxsYmFjaygoaXRlbSwgX3JlZikgPT4ge1xuICAgIGxldCB7XG4gICAgICBhY3RpdmVJbmRleFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IHB1Ymxpc2hlZElkID0gZ2V0UHVibGlzaGVkSWQoaXRlbS5faWQpO1xuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBjaGlsZEl0ZW1JZCA9PT0gcHVibGlzaGVkSWQ7XG4gICAgY29uc3QgcHJlc3NlZCA9ICFpc0FjdGl2ZSAmJiBpc1NlbGVjdGVkO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gaXNBY3RpdmUgJiYgaXNTZWxlY3RlZDtcbiAgICBjb25zdCBpc0xhc3RJdGVtID0gYWN0aXZlSW5kZXggPT09IGl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgY29uc3Qgc2hvd1NwaW5uZXIgPSBpc0xhc3RJdGVtICYmIGlzTGF6eUxvYWRpbmc7XG4gICAgY29uc3Qgc2hvd01heEl0ZW1zTWVzc2FnZSA9IGlzTGFzdEl0ZW0gJiYgaGFzTWF4SXRlbXM7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyogQF9fUFVSRV9fICovanN4KFBhbmVJdGVtLCB7XG4gICAgICAgIGljb246IHNob3dJY29ucyA9PT0gZmFsc2UgPyBmYWxzZSA6IHZvaWQgMCxcbiAgICAgICAgaWQ6IHB1Ymxpc2hlZElkLFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogMSxcbiAgICAgICAgcHJlc3NlZCxcbiAgICAgICAgc2NoZW1hVHlwZTogc2NoZW1hLmdldChpdGVtLl90eXBlKSxcbiAgICAgICAgc2VsZWN0ZWQsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9KSwgc2hvd1NwaW5uZXIgJiYgLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGp1c3RpZnk6IFwiY2VudGVyXCIsXG4gICAgICAgIHBhZGRpbmc6IDQsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goU3Bpbm5lciwge1xuICAgICAgICAgIG11dGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KSwgc2hvd01heEl0ZW1zTWVzc2FnZSAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgIG1hcmdpblk6IDEsXG4gICAgICAgIHBhZGRpbmdYOiAzLFxuICAgICAgICBwYWRkaW5nWTogNCxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeHMoVGV4dCwge1xuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIG11dGVkOiB0cnVlLFxuICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IFtcIkRpc3BsYXlpbmcgYSBtYXhpbXVtIG9mIFwiLCBGVUxMX0xJU1RfTElNSVQsIFwiIGRvY3VtZW50c1wiXVxuICAgICAgICB9KVxuICAgICAgfSldXG4gICAgfSk7XG4gIH0sIFtjaGlsZEl0ZW1JZCwgaXNBY3RpdmUsIGl0ZW1zLmxlbmd0aCwgbGF5b3V0LCBzY2hlbWEsIHNob3dJY29ucywgaGFzTWF4SXRlbXMsIGlzTGF6eUxvYWRpbmddKTtcbiAgY29uc3Qgbm9Eb2N1bWVudHNDb250ZW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGhhc1NlYXJjaFF1ZXJ5KSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDb250YWluZXIsIHtcbiAgICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICAgICAgICBwYWRkaW5nWTogNSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIk5vIHJlc3VsdHMgZm91bmRcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goRmxleCwge1xuICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQ29udGFpbmVyLCB7XG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KEJveCwge1xuICAgICAgICAgIHBhZGRpbmdYOiA0LFxuICAgICAgICAgIHBhZGRpbmdZOiA1LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBtdXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBmaWx0ZXJJc1NpbXBsZVR5cGVDb25zdHJhaW50ID8gXCJObyBkb2N1bWVudHMgb2YgdGhpcyB0eXBlXCIgOiBcIk5vIG1hdGNoaW5nIGRvY3VtZW50c1wiXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sIFtmaWx0ZXJJc1NpbXBsZVR5cGVDb25zdHJhaW50LCBoYXNTZWFyY2hRdWVyeV0pO1xuICBjb25zdCBtYWluQ29udGVudCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc2hvdWxkUmVuZGVyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KEZsZXgsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgaGVpZ2h0OiBcImZpbGxcIixcbiAgICAgICAganVzdGlmeTogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDb250YWluZXIsIHtcbiAgICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhTdGFjaywge1xuICAgICAgICAgICAgcGFkZGluZ1g6IDQsXG4gICAgICAgICAgICBwYWRkaW5nWTogNSxcbiAgICAgICAgICAgIHNwYWNlOiA0LFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiBAX19QVVJFX18gKi9qc3goSGVhZGluZywge1xuICAgICAgICAgICAgICBhczogXCJoM1wiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogXCJDb3VsZCBub3QgZmV0Y2ggbGlzdCBpdGVtc1wiXG4gICAgICAgICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICAgIGFzOiBcInBcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcIkVycm9yOiBcIiwgLyogQF9fUFVSRV9fICovanN4KFwiY29kZVwiLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KSwgb25SZXRyeSAmJiAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgaWNvbjogU3luY0ljb24sXG4gICAgICAgICAgICAgICAgb25DbGljazogb25SZXRyeSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlJldHJ5XCIsXG4gICAgICAgICAgICAgICAgdG9uZTogXCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFpc0xvYWRpbmcgJiYgaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbm9Eb2N1bWVudHNDb250ZW50O1xuICAgIH1cbiAgICBpZiAobG9hZGluZ1ZhcmlhbnQgPT09IFwiaW5pdGlhbFwiICYmIGlzTG9hZGluZykge1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChEZWxheSwge1xuICAgICAgICBtczogMzAwLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KExvYWRpbmdWaWV3LCB7XG4gICAgICAgICAgbGF5b3V0XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvYWRpbmdWYXJpYW50ID09PSBcInNwaW5uZXJcIiAmJiBpc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSBcIlwiLmNvbmNhdChpbmRleCwgXCItXCIpLmNvbmNhdChjb2xsYXBzZWQpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi9qc3goUm9vdEJveCwge1xuICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICBoZWlnaHQ6IFwiZmlsbFwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqL2pzeChDb21tYW5kTGlzdEJveCwge1xuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KENvbW1hbmRMaXN0LCB7XG4gICAgICAgICAgYWN0aXZlSXRlbURhdGFBdHRyOiBcImRhdGEtaG92ZXJlZFwiLFxuICAgICAgICAgIGFyaWFMYWJlbDogcGFuZVRpdGxlLFxuICAgICAgICAgIGNhblJlY2VpdmVGb2N1czogdHJ1ZSxcbiAgICAgICAgICBmb2N1c1JpbmdPZmZzZXQ6IC0zLFxuICAgICAgICAgIGlucHV0RWxlbWVudDogc2VhcmNoSW5wdXRFbGVtZW50LFxuICAgICAgICAgIGl0ZW1IZWlnaHQ6IDUxLFxuICAgICAgICAgIGl0ZW1zLFxuICAgICAgICAgIG9uRW5kUmVhY2hlZDogaGFuZGxlRW5kUmVhY2hlZCxcbiAgICAgICAgICBvbmx5U2hvd1NlbGVjdGlvbldoZW5BY3RpdmU6IHRydWUsXG4gICAgICAgICAgb3ZlcnNjYW46IDEwLFxuICAgICAgICAgIHBhZGRpbmc6IDIsXG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTogMSxcbiAgICAgICAgICByZW5kZXJJdGVtLFxuICAgICAgICAgIHdyYXBBcm91bmQ6IGZhbHNlXG4gICAgICAgIH0sIGtleSlcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sIFtjb2xsYXBzZWQsIGVycm9yLCBoYW5kbGVFbmRSZWFjaGVkLCBpbmRleCwgaXNMb2FkaW5nLCBpdGVtcywgbGF5b3V0LCBsb2FkaW5nVmFyaWFudCxcbiAgLy8gbm9Eb2N1bWVudHNDb250ZW50LFxuICBvblJldHJ5LCByZW5kZXJJdGVtLCBzZWFyY2hJbnB1dEVsZW1lbnQsIHNob3VsZFJlbmRlcl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovanN4KFBhbmVDb250ZW50LCB7XG4gICAgb3ZlcmZsb3c6IGxheW91dENvbGxhcHNlZCB8fCBsb2FkaW5nVmFyaWFudCA9PT0gXCJpbml0aWFsXCIgPyBcImhpZGRlblwiIDogXCJhdXRvXCIsXG4gICAgY2hpbGRyZW46IG1haW5Db250ZW50XG4gIH0pO1xufVxuY29uc3QgRG9jdW1lbnRMaXN0UGFuZUhlYWRlciA9IG1lbW8oX3JlZjIgPT4ge1xuICBsZXQge1xuICAgIGNvbnRlbnRBZnRlcixcbiAgICBpbmRleCxcbiAgICBpbml0aWFsVmFsdWVUZW1wbGF0ZXMgPSBbXSxcbiAgICBtZW51SXRlbUdyb3VwcyA9IFtdLFxuICAgIG1lbnVJdGVtcyA9IFtdLFxuICAgIHNldExheW91dCxcbiAgICBzZXRTb3J0T3JkZXIsXG4gICAgdGl0bGVcbiAgfSA9IF9yZWYyO1xuICBjb25zdCB7XG4gICAgZmVhdHVyZXNcbiAgfSA9IHVzZURlc2tUb29sKCk7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZWQsXG4gICAgaXNMYXN0XG4gIH0gPSB1c2VQYW5lKCk7XG4gIGNvbnN0IHRhYkluZGV4ID0gaXNMYXN0ICYmICFjb2xsYXBzZWQgPyAtMSA6IDA7XG4gIGNvbnN0IGFjdGlvbkhhbmRsZXJzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldExheW91dDogX3JlZjMgPT4ge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIGxheW91dDogdmFsdWVcbiAgICAgICAgfSA9IF9yZWYzO1xuICAgICAgICBzZXRMYXlvdXQodmFsdWUpO1xuICAgICAgfSxcbiAgICAgIHNldFNvcnRPcmRlcjogc29ydCA9PiB7XG4gICAgICAgIHNldFNvcnRPcmRlcihzb3J0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbc2V0TGF5b3V0LCBzZXRTb3J0T3JkZXJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChQYW5lSGVhZGVyLCB7XG4gICAgYWN0aW9uczogLyogQF9fUFVSRV9fICovanN4KFBhbmVIZWFkZXJBY3Rpb25zLCB7XG4gICAgICBpbml0aWFsVmFsdWVUZW1wbGF0ZUl0ZW1zOiBpbml0aWFsVmFsdWVUZW1wbGF0ZXMsXG4gICAgICBhY3Rpb25IYW5kbGVycyxcbiAgICAgIG1lbnVJdGVtR3JvdXBzLFxuICAgICAgbWVudUl0ZW1zXG4gICAgfSksXG4gICAgYmFja0J1dHRvbjogZmVhdHVyZXMuYmFja0J1dHRvbiAmJiBpbmRleCA+IDAgJiYgLyogQF9fUFVSRV9fICovanN4KEJ1dHRvbiwge1xuICAgICAgYXM6IEJhY2tMaW5rLFxuICAgICAgXCJkYXRhLWFzXCI6IFwiYVwiLFxuICAgICAgaWNvbjogQXJyb3dMZWZ0SWNvbixcbiAgICAgIG1vZGU6IFwiYmxlZWRcIlxuICAgIH0pLFxuICAgIGNvbnRlbnRBZnRlcixcbiAgICB0YWJJbmRleCxcbiAgICB0aXRsZVxuICB9KTtcbn0pO1xuRG9jdW1lbnRMaXN0UGFuZUhlYWRlci5kaXNwbGF5TmFtZSA9IFwiRG9jdW1lbnRMaXN0UGFuZUhlYWRlclwiO1xuZnVuY3Rpb24gbGlzdGVuU2VhcmNoUXVlcnkob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgY2xpZW50LFxuICAgIHNjaGVtYSxcbiAgICBzb3J0LFxuICAgIGxpbWl0LFxuICAgIHBhcmFtcyxcbiAgICBmaWx0ZXIsXG4gICAgc2VhcmNoUXVlcnksXG4gICAgc3RhdGljVHlwZU5hbWVzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBzb3J0QnkgPSBzb3J0LmJ5O1xuICBjb25zdCBleHRlbmRlZFByb2plY3Rpb24gPSBzb3J0ID09IG51bGwgPyB2b2lkIDAgOiBzb3J0LmV4dGVuZGVkUHJvamVjdGlvbjtcbiAgY29uc3QgZXZlbnRzJCA9IGRlZmVyKCgpID0+IHtcbiAgICByZXR1cm4gY2xpZW50Lmxpc3RlbihcIipbXCIuY29uY2F0KGZpbHRlciwgXCJdXCIpLCBwYXJhbXMsIHtcbiAgICAgIGV2ZW50czogW1wid2VsY29tZVwiLCBcIm11dGF0aW9uXCIsIFwicmVjb25uZWN0XCJdLFxuICAgICAgaW5jbHVkZVJlc3VsdDogZmFsc2UsXG4gICAgICB2aXNpYmlsaXR5OiBcInF1ZXJ5XCJcbiAgICB9KTtcbiAgfSkucGlwZShtZXJnZU1hcCgoZXYsIGkpID0+IHtcbiAgICBjb25zdCBpc0ZpcnN0ID0gaSA9PT0gMDtcbiAgICBpZiAoaXNGaXJzdCAmJiBldi50eXBlICE9PSBcIndlbGNvbWVcIikge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoKCkgPT4gbmV3IEVycm9yKGV2LnR5cGUgPT09IFwicmVjb25uZWN0XCIgPyBcIkNvdWxkIG5vdCBlc3RhYmxpc2ggRXZlbnRTb3VyY2UgY29ubmVjdGlvblwiIDogJ1JlY2VpdmVkIHVuZXhwZWN0ZWQgdHlwZSBvZiBmaXJzdCBldmVudCBcIicuY29uY2F0KGV2LnR5cGUsICdcIicpKSk7XG4gICAgfVxuICAgIHJldHVybiBvZihldik7XG4gIH0pLCBzaGFyZSgpKTtcbiAgY29uc3QgW3dlbGNvbWUkLCBtdXRhdGlvbkFuZFJlY29ubmVjdCRdID0gcGFydGl0aW9uKGV2ZW50cyQsIGV2ID0+IGV2LnR5cGUgPT09IFwid2VsY29tZVwiKTtcbiAgcmV0dXJuIG1lcmdlKHdlbGNvbWUkLnBpcGUodGFrZSgxKSksIG11dGF0aW9uQW5kUmVjb25uZWN0JC5waXBlKHRocm90dGxlVGltZSgxZTMsIGFzeW5jU2NoZWR1bGVyLCB7XG4gICAgbGVhZGluZzogdHJ1ZSxcbiAgICB0cmFpbGluZzogdHJ1ZVxuICB9KSkpLnBpcGUoZXhoYXVzdE1hcFdpdGhUcmFpbGluZyhldmVudCA9PiB7XG4gICAgY29uc3QgdHlwZU5hbWVzJCA9IHN0YXRpY1R5cGVOYW1lcyA/IG9mKHN0YXRpY1R5cGVOYW1lcykgOiBjbGllbnQub2JzZXJ2YWJsZS5mZXRjaChcImFycmF5Ojp1bmlxdWUoKltcIi5jb25jYXQoZmlsdGVyLCBcIl1bXS5fdHlwZSlcIiksIHBhcmFtcyk7XG4gICAgcmV0dXJuIHR5cGVOYW1lcyQucGlwZShtZXJnZU1hcCh0eXBlTmFtZXMgPT4ge1xuICAgICAgY29uc3QgdHlwZXMgPSB0eXBlTmFtZXMuZmxhdE1hcChuYW1lID0+IHNjaGVtYS5nZXQobmFtZSkgfHwgW10pO1xuICAgICAgY29uc3Qgc2VhcmNoVGVybXMgPSB7XG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgcXVlcnk6IHNlYXJjaFF1ZXJ5IHx8IFwiXCIsXG4gICAgICAgIHR5cGVzXG4gICAgICB9O1xuICAgICAgY29uc3Qgc2VhcmNoT3B0aW9ucyA9IHtcbiAgICAgICAgX191bnN0YWJsZV9leHRlbmRlZFByb2plY3Rpb246IGV4dGVuZGVkUHJvamVjdGlvbixcbiAgICAgICAgY29tbWVudHM6IFtcImZpbmRhYmlsaXR5LXNvdXJjZTogXCIuY29uY2F0KHNlYXJjaFF1ZXJ5ID8gXCJsaXN0LXF1ZXJ5XCIgOiBcImxpc3RcIildLFxuICAgICAgICBsaW1pdCxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBzb3J0OiBzb3J0QnlcbiAgICAgIH07XG4gICAgICBjb25zdCB7XG4gICAgICAgIHF1ZXJ5OiBjcmVhdGVkUXVlcnksXG4gICAgICAgIHBhcmFtczogY3JlYXRlZFBhcmFtc1xuICAgICAgfSA9IGNyZWF0ZVNlYXJjaFF1ZXJ5KHNlYXJjaFRlcm1zLCBzZWFyY2hPcHRpb25zKTtcbiAgICAgIGNvbnN0IGRvRmV0Y2ggPSAoKSA9PiBjbGllbnQub2JzZXJ2YWJsZS5mZXRjaChjcmVhdGVkUXVlcnksIGNyZWF0ZWRQYXJhbXMpO1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwibXV0YXRpb25cIiAmJiBldmVudC52aXNpYmlsaXR5ICE9PSBcInF1ZXJ5XCIpIHtcbiAgICAgICAgcmV0dXJuIHRpbWVyKDEyMDApLnBpcGUobWVyZ2VNYXAoZG9GZXRjaCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvRmV0Y2goKTtcbiAgICB9KSk7XG4gIH0pKTtcbn1cbmNvbnN0IEVNUFRZX0FSUkFZJDEgPSBbXTtcbmNvbnN0IElOSVRJQUxfU1RBVEUgPSB7XG4gIGVycm9yOiBudWxsLFxuICBvblJldHJ5OiB2b2lkIDAsXG4gIHJlc3VsdDogbnVsbFxufTtcbmNvbnN0IElOSVRJQUxfUVVFUllfUkVTVUxUUyA9IHtcbiAgcmVzdWx0OiBudWxsLFxuICBlcnJvcjogbnVsbFxufTtcbmZ1bmN0aW9uIHVzZURvY3VtZW50TGlzdChvcHRzKSB7XG4gIGNvbnN0IHtcbiAgICBmaWx0ZXIsXG4gICAgcGFyYW1zOiBwYXJhbXNQcm9wLFxuICAgIHNvcnRPcmRlcixcbiAgICBzZWFyY2hRdWVyeSxcbiAgICBhcGlWZXJzaW9uXG4gIH0gPSBvcHRzO1xuICBjb25zdCBjbGllbnQgPSB1c2VDbGllbnQoe1xuICAgIC4uLkRFRkFVTFRfU1RVRElPX0NMSUVOVF9PUFRJT05TLFxuICAgIGFwaVZlcnNpb246IGFwaVZlcnNpb24gfHwgREVGQVVMVF9TVFVESU9fQ0xJRU5UX09QVElPTlMuYXBpVmVyc2lvblxuICB9KTtcbiAgY29uc3Qgc2NoZW1hID0gdXNlU2NoZW1hKCk7XG4gIGNvbnN0IFtyZXN1bHRTdGF0ZSwgc2V0UmVzdWx0XSA9IHVzZVN0YXRlKElOSVRJQUxfU1RBVEUpO1xuICBjb25zdCB7XG4gICAgb25SZXRyeSxcbiAgICBlcnJvcixcbiAgICByZXN1bHRcbiAgfSA9IHJlc3VsdFN0YXRlO1xuICBjb25zdCBkb2N1bWVudHMgPSByZXN1bHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3VsdC5kb2N1bWVudHM7XG4gIGNvbnN0IGl0ZW1zID0gdXNlTWVtbygoKSA9PiBkb2N1bWVudHMgPyByZW1vdmVQdWJsaXNoZWRXaXRoRHJhZnRzKGRvY3VtZW50cykgOiBFTVBUWV9BUlJBWSQxLCBbZG9jdW1lbnRzXSk7XG4gIGNvbnN0IFtpc0xhenlMb2FkaW5nLCBzZXRJc0xhenlMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2hhc0Z1bGxMaXN0LCBzZXRIYXNGdWxsTGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG91bGRGZXRjaEZ1bGxMaXN0LCBzZXRTaG91bGRGZXRjaEZ1bGxMaXN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgdHlwZU5hbWVGcm9tRmlsdGVyID0gdXNlTWVtbygoKSA9PiBnZXRUeXBlTmFtZUZyb21TaW5nbGVUeXBlRmlsdGVyKGZpbHRlciwgcGFyYW1zUHJvcCksIFtmaWx0ZXIsIHBhcmFtc1Byb3BdKTtcbiAgY29uc3QgaXNMb2FkaW5nID0gcmVzdWx0ID09PSBudWxsICYmICFlcnJvcjtcbiAgY29uc3QgaGFzTWF4SXRlbXMgPSAoZG9jdW1lbnRzID09IG51bGwgPyB2b2lkIDAgOiBkb2N1bWVudHMubGVuZ3RoKSA9PT0gRlVMTF9MSVNUX0xJTUlUO1xuICBjb25zdCBvbkxpc3RDaGFuZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGlzTG9hZGluZyB8fCBoYXNGdWxsTGlzdCB8fCBzaG91bGRGZXRjaEZ1bGxMaXN0KSByZXR1cm47XG4gICAgc2V0U2hvdWxkRmV0Y2hGdWxsTGlzdCh0cnVlKTtcbiAgfSwgW2lzTG9hZGluZywgaGFzRnVsbExpc3QsIHNob3VsZEZldGNoRnVsbExpc3RdKTtcbiAgY29uc3QgaGFuZGxlU2V0UmVzdWx0ID0gdXNlQ2FsbGJhY2socmVzID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmIChyZXMuZXJyb3IpIHtcbiAgICAgIHNldFJlc3VsdChyZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBkb2N1bWVudHNMZW5ndGggPSAoKF9iID0gKF9hID0gcmVzLnJlc3VsdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmxlbmd0aCkgfHwgMDtcbiAgICBjb25zdCBpc0xvYWRpbmdNb3JlSXRlbXMgPSAhcmVzLmVycm9yICYmIChyZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHJlcy5yZXN1bHQpID09PSBudWxsICYmIHNob3VsZEZldGNoRnVsbExpc3Q7XG4gICAgaWYgKGlzTG9hZGluZ01vcmVJdGVtcykge1xuICAgICAgc2V0SXNMYXp5TG9hZGluZyh0cnVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRvY3VtZW50c0xlbmd0aCA8IFBBUlRJQUxfUEFHRV9MSU1JVCAmJiBkb2N1bWVudHNMZW5ndGggIT09IDAgJiYgIXNob3VsZEZldGNoRnVsbExpc3QpIHtcbiAgICAgIHNldEhhc0Z1bGxMaXN0KHRydWUpO1xuICAgIH1cbiAgICBpZiAoKHJlcyA9PSBudWxsID8gdm9pZCAwIDogcmVzLnJlc3VsdCkgPT09IG51bGwpIHtcbiAgICAgIHNldFJlc3VsdChwcmV2ID0+ICh7XG4gICAgICAgIC4uLihwcmV2LmVycm9yID8gcmVzIDogcHJldilcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0SXNMYXp5TG9hZGluZyhmYWxzZSk7XG4gICAgc2V0UmVzdWx0KHJlcyk7XG4gIH0sIFtzaG91bGRGZXRjaEZ1bGxMaXN0XSk7XG4gIGNvbnN0IHF1ZXJ5UmVzdWx0cyQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBvblJldHJ5JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgY29uc3QgX29uUmV0cnkgPSAoKSA9PiBvblJldHJ5JC5uZXh0KCk7XG4gICAgY29uc3QgbGltaXQgPSBzaG91bGRGZXRjaEZ1bGxMaXN0ID8gRlVMTF9MSVNUX0xJTUlUIDogUEFSVElBTF9QQUdFX0xJTUlUO1xuICAgIGNvbnN0IHNvcnQgPSBzb3J0T3JkZXIgfHwgREVGQVVMVF9PUkRFUklORztcbiAgICByZXR1cm4gbGlzdGVuU2VhcmNoUXVlcnkoe1xuICAgICAgY2xpZW50LFxuICAgICAgZmlsdGVyLFxuICAgICAgbGltaXQsXG4gICAgICBwYXJhbXM6IHBhcmFtc1Byb3AsXG4gICAgICBzY2hlbWEsXG4gICAgICBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnkgfHwgXCJcIixcbiAgICAgIHNvcnQsXG4gICAgICBzdGF0aWNUeXBlTmFtZXM6IHR5cGVOYW1lRnJvbUZpbHRlciA/IFt0eXBlTmFtZUZyb21GaWx0ZXJdIDogdm9pZCAwXG4gICAgfSkucGlwZShtYXAocmVzdWx0cyA9PiAoe1xuICAgICAgcmVzdWx0OiB7XG4gICAgICAgIGRvY3VtZW50czogcmVzdWx0c1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBudWxsXG4gICAgfSkpLCBzdGFydFdpdGgoSU5JVElBTF9RVUVSWV9SRVNVTFRTKSwgY2F0Y2hFcnJvcihlcnIgPT4ge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFByb2dyZXNzRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoKCkgPT4gbmV3IEVycm9yKFwiUmVxdWVzdCBlcnJvclwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhyb3dFcnJvcigoKSA9PiBlcnIpO1xuICAgIH0pLCBjYXRjaEVycm9yKChlcnIsIGNhdWdodCQpID0+IHtcbiAgICAgIHJldHVybiBjb25jYXQob2Yoe1xuICAgICAgICByZXN1bHQ6IG51bGwsXG4gICAgICAgIGVycm9yOiBlcnJcbiAgICAgIH0pLCBtZXJnZShmcm9tRXZlbnQod2luZG93LCBcIm9ubGluZVwiKSwgb25SZXRyeSQpLnBpcGUodGFrZSQxKDEpLCBtZXJnZU1hcCQxKCgpID0+IGNhdWdodCQpKSk7XG4gICAgfSksIHNjYW4oKHByZXYsIG5leHQpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgLi4ubmV4dCxcbiAgICAgIG9uUmV0cnk6IF9vblJldHJ5XG4gICAgfSkpKTtcbiAgfSwgW2NsaWVudCwgZmlsdGVyLCBwYXJhbXNQcm9wLCBzY2hlbWEsIHNlYXJjaFF1ZXJ5LCBzaG91bGRGZXRjaEZ1bGxMaXN0LCBzb3J0T3JkZXIsIHR5cGVOYW1lRnJvbUZpbHRlcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YiA9IHF1ZXJ5UmVzdWx0cyQuc3Vic2NyaWJlKGhhbmRsZVNldFJlc3VsdCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtoYW5kbGVTZXRSZXN1bHQsIHF1ZXJ5UmVzdWx0cyRdKTtcbiAgY29uc3QgcmVzZXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SGFzRnVsbExpc3QoZmFsc2UpO1xuICAgIHNldElzTGF6eUxvYWRpbmcoZmFsc2UpO1xuICAgIHNldFJlc3VsdChJTklUSUFMX1NUQVRFKTtcbiAgICBzZXRTaG91bGRGZXRjaEZ1bGxMaXN0KGZhbHNlKTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlc2V0KCk7XG4gIH0sIFtyZXNldCwgZmlsdGVyLCBwYXJhbXNQcm9wLCBzb3J0T3JkZXIsIHNlYXJjaFF1ZXJ5XSk7XG4gIHJldHVybiB7XG4gICAgZXJyb3IsXG4gICAgaGFzTWF4SXRlbXMsXG4gICAgaXNMYXp5TG9hZGluZyxcbiAgICBpc0xvYWRpbmcsXG4gICAgaXNTZWFyY2hSZWFkeTogIWVycm9yLFxuICAgIGl0ZW1zLFxuICAgIG9uTGlzdENoYW5nZSxcbiAgICBvblJldHJ5XG4gIH07XG59XG52YXIgX19mcmVlemUgPSBPYmplY3QuZnJlZXplO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3RlbXBsYXRlID0gKGNvb2tlZCwgcmF3KSA9PiBfX2ZyZWV6ZShfX2RlZlByb3AoY29va2VkLCBcInJhd1wiLCB7XG4gIHZhbHVlOiBfX2ZyZWV6ZShyYXcgfHwgY29va2VkLnNsaWNlKCkpXG59KSk7XG52YXIgX2EsIF9iLCBfYztcbmNvbnN0IEVNUFRZX0FSUkFZID0gW107XG5jb25zdCByb3RhdGUgPSBrZXlmcmFtZXMoX2EgfHwgKF9hID0gX190ZW1wbGF0ZShbXCJcXG4gIGZyb20ge1xcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcXG4gIH1cXG4gIHRvIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gIH1cXG5cIl0pKSk7XG5jb25zdCBBbmltYXRlZFNwaW5uZXJJY29uID0gc3R5bGVkKFNwaW5uZXJJY29uKShfYiB8fCAoX2IgPSBfX3RlbXBsYXRlKFtcIlxcbiAgYW5pbWF0aW9uOiBcIiwgXCIgNTAwbXMgbGluZWFyIGluZmluaXRlO1xcblwiXSkpLCByb3RhdGUpO1xuY29uc3QgU2VhcmNoQ2FyZCA9IHN0eWxlZChDYXJkKShfYyB8fCAoX2MgPSBfX3RlbXBsYXRlKFtcIlxcbiAgW2RhdGEtdWk9J1RleHRJbnB1dCddIHtcXG4gICAgYm9yZGVyLXJhZGl1czogaW5oZXJpdDtcXG4gIH1cXG5cIl0pKSk7XG5mdW5jdGlvbiB1c2VTaGFsbG93VW5pcXVlKHZhbHVlKSB7XG4gIGNvbnN0IHZhbHVlUmVmID0gdXNlUmVmKHZhbHVlKTtcbiAgaWYgKCFzaGFsbG93RXF1YWxzKHZhbHVlUmVmLmN1cnJlbnQsIHZhbHVlKSkge1xuICAgIHZhbHVlUmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdmFsdWVSZWYuY3VycmVudDtcbn1cbmNvbnN0IGFkZFNlbGVjdGVkU3RhdGVUb01lbnVJdGVtcyA9IG9wdGlvbnMgPT4ge1xuICBjb25zdCB7XG4gICAgbWVudUl0ZW1zLFxuICAgIHNvcnRPcmRlclJhdyxcbiAgICBsYXlvdXRcbiAgfSA9IG9wdGlvbnM7XG4gIHJldHVybiBtZW51SXRlbXMgPT0gbnVsbCA/IHZvaWQgMCA6IG1lbnVJdGVtcy5tYXAoaXRlbSA9PiB7XG4gICAgdmFyIF9hMiwgX2IyLCBfYzIsIF9kO1xuICAgIGlmICgoX2EyID0gaXRlbS5wYXJhbXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIubGF5b3V0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICBzZWxlY3RlZDogbGF5b3V0ID09PSAoKF9iMiA9IGl0ZW0ucGFyYW1zKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLmxheW91dClcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICgoX2MyID0gaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS5wYXJhbXMpID09IG51bGwgPyB2b2lkIDAgOiBfYzIuYnkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLml0ZW0sXG4gICAgICAgIHNlbGVjdGVkOiBpc0VxdWFsKHNvcnRPcmRlclJhdyA9PSBudWxsID8gdm9pZCAwIDogc29ydE9yZGVyUmF3LmJ5LCAoKF9kID0gaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS5wYXJhbXMpID09IG51bGwgPyB2b2lkIDAgOiBfZC5ieSkgfHwgRU1QVFlfQVJSQVkpXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH07XG4gIH0pO1xufTtcbmNvbnN0IERvY3VtZW50TGlzdFBhbmUgPSBtZW1vKGZ1bmN0aW9uIERvY3VtZW50TGlzdFBhbmUyKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjaGlsZEl0ZW1JZCxcbiAgICBpbmRleCxcbiAgICBpc0FjdGl2ZSxcbiAgICBpc1NlbGVjdGVkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHNjaGVtYSA9IHVzZVNjaGVtYSgpO1xuICBjb25zdCB7XG4gICAgbmFtZTogcGFyZW50U291cmNlTmFtZVxuICB9ID0gdXNlU291cmNlKCk7XG4gIGNvbnN0IHtcbiAgICBkZWZhdWx0TGF5b3V0ID0gXCJkZWZhdWx0XCIsXG4gICAgZGlzcGxheU9wdGlvbnMsXG4gICAgaW5pdGlhbFZhbHVlVGVtcGxhdGVzID0gRU1QVFlfQVJSQVksXG4gICAgbWVudUl0ZW1Hcm91cHMsXG4gICAgbWVudUl0ZW1zLFxuICAgIG9wdGlvbnMsXG4gICAgdGl0bGVcbiAgfSA9IHBhbmU7XG4gIGNvbnN0IHtcbiAgICBhcGlWZXJzaW9uLFxuICAgIGRlZmF1bHRPcmRlcmluZyA9IEVNUFRZX0FSUkFZLFxuICAgIGZpbHRlclxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgcGFyYW1zID0gdXNlU2hhbGxvd1VuaXF1ZShvcHRpb25zLnBhcmFtcyB8fCBFTVBUWV9SRUNPUkQpO1xuICBjb25zdCBzb3VyY2VOYW1lID0gcGFuZS5zb3VyY2U7XG4gIGNvbnN0IHR5cGVOYW1lID0gdXNlTWVtbygoKSA9PiBnZXRUeXBlTmFtZUZyb21TaW5nbGVUeXBlRmlsdGVyKGZpbHRlciwgcGFyYW1zKSwgW2ZpbHRlciwgcGFyYW1zXSk7XG4gIGNvbnN0IHNob3dJY29ucyA9IChkaXNwbGF5T3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZGlzcGxheU9wdGlvbnMuc2hvd0ljb25zKSAhPT0gZmFsc2U7XG4gIGNvbnN0IFtsYXlvdXQsIHNldExheW91dF0gPSB1c2VEZXNrVG9vbFNldHRpbmcodHlwZU5hbWUsIFwibGF5b3V0XCIsIGRlZmF1bHRMYXlvdXQpO1xuICBjb25zdCBbc2VhcmNoUXVlcnksIHNldFNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2VhcmNoSW5wdXRWYWx1ZSwgc2V0U2VhcmNoSW5wdXRWYWx1ZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3NlYXJjaElucHV0RWxlbWVudCwgc2V0U2VhcmNoSW5wdXRFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBzaG93U2VhcmNoTG9hZGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGRlZmF1bHRTb3J0T3JkZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKGRlZmF1bHRPcmRlcmluZyA9PSBudWxsID8gdm9pZCAwIDogZGVmYXVsdE9yZGVyaW5nLmxlbmd0aCkgPiAwID8ge1xuICAgICAgYnk6IGRlZmF1bHRPcmRlcmluZ1xuICAgIH0gOiBERUZBVUxUX09SREVSSU5HO1xuICB9LCBbZGVmYXVsdE9yZGVyaW5nXSk7XG4gIGNvbnN0IFtzb3J0T3JkZXJSYXcsIHNldFNvcnRPcmRlcl0gPSB1c2VEZXNrVG9vbFNldHRpbmcodHlwZU5hbWUsIFwic29ydE9yZGVyXCIsIGRlZmF1bHRTb3J0T3JkZXIpO1xuICBjb25zdCBzb3J0V2l0aE9yZGVyaW5nRm4gPSB0eXBlTmFtZSAmJiBzb3J0T3JkZXJSYXcgPyBhcHBseU9yZGVyaW5nRnVuY3Rpb25zKHNvcnRPcmRlclJhdywgc2NoZW1hLmdldCh0eXBlTmFtZSkpIDogc29ydE9yZGVyUmF3O1xuICBjb25zdCBzb3J0T3JkZXIgPSB1c2VVbmlxdWUoc29ydFdpdGhPcmRlcmluZ0ZuKTtcbiAgY29uc3QgZmlsdGVySXNTaW1wbGVUeXBlQ29uc3RyYWludCA9IGlzU2ltcGxlVHlwZUZpbHRlcihmaWx0ZXIpO1xuICBjb25zdCB7XG4gICAgZXJyb3IsXG4gICAgaGFzTWF4SXRlbXMsXG4gICAgaXNMYXp5TG9hZGluZyxcbiAgICBpc0xvYWRpbmcsXG4gICAgaXNTZWFyY2hSZWFkeSxcbiAgICBpdGVtcyxcbiAgICBvbkxpc3RDaGFuZ2UsXG4gICAgb25SZXRyeVxuICB9ID0gdXNlRG9jdW1lbnRMaXN0KHtcbiAgICBhcGlWZXJzaW9uLFxuICAgIGZpbHRlcixcbiAgICBwYXJhbXMsXG4gICAgc2VhcmNoUXVlcnk6IHNlYXJjaFF1ZXJ5ID09IG51bGwgPyB2b2lkIDAgOiBzZWFyY2hRdWVyeS50cmltKCksXG4gICAgc29ydE9yZGVyXG4gIH0pO1xuICBjb25zdCBtZW51SXRlbXNXaXRoU2VsZWN0ZWRTdGF0ZSA9IHVzZU1lbW8oKCkgPT4gYWRkU2VsZWN0ZWRTdGF0ZVRvTWVudUl0ZW1zKHtcbiAgICBtZW51SXRlbXMsXG4gICAgc29ydE9yZGVyUmF3LFxuICAgIGxheW91dFxuICB9KSwgW2xheW91dCwgbWVudUl0ZW1zLCBzb3J0T3JkZXJSYXddKTtcbiAgY29uc3QgaGFuZGxlUXVlcnlDaGFuZ2UgPSB1c2VPYnNlcnZhYmxlQ2FsbGJhY2soZXZlbnQkID0+IHtcbiAgICByZXR1cm4gZXZlbnQkLnBpcGUobWFwJDEoZXZlbnQgPT4gZXZlbnQudGFyZ2V0LnZhbHVlKSwgdGFwKHNldFNlYXJjaElucHV0VmFsdWUpLCBkZWJvdW5jZSh2YWx1ZSA9PiB2YWx1ZSA9PT0gXCJcIiA/IG9mKFwiXCIpIDogdGltZXIoMzAwKSksIHRhcChzZXRTZWFyY2hRdWVyeSkpO1xuICB9LCBbXSk7XG4gIGNvbnN0IGhhbmRsZUNsZWFyU2VhcmNoID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNlYXJjaFF1ZXJ5KFwiXCIpO1xuICAgIHNldFNlYXJjaElucHV0VmFsdWUoXCJcIik7XG4gIH0sIFtdKTtcbiAgY29uc3QgaGFuZGxlU2VhcmNoS2V5RG93biA9IHVzZUNhbGxiYWNrKGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICBoYW5kbGVDbGVhclNlYXJjaCgpO1xuICAgIH1cbiAgfSwgW2hhbmRsZUNsZWFyU2VhcmNoXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dTZWFyY2hMb2FkaW5nUmVmLmN1cnJlbnQgPT09IGZhbHNlICYmICFpc0xvYWRpbmcpIHtcbiAgICAgIHNob3dTZWFyY2hMb2FkaW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2hvd1NlYXJjaExvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtpc0xvYWRpbmddKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBoYW5kbGVDbGVhclNlYXJjaCgpO1xuICAgIHNob3dTZWFyY2hMb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgfSwgW3BhbmVLZXksIGhhbmRsZUNsZWFyU2VhcmNoXSk7XG4gIGNvbnN0IGxvYWRpbmdWYXJpYW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc2hvd1NwaW5uZXIgPSBpc0xvYWRpbmcgJiYgaXRlbXMubGVuZ3RoID09PSAwICYmIHNob3dTZWFyY2hMb2FkaW5nUmVmLmN1cnJlbnQ7XG4gICAgaWYgKHNob3dTcGlubmVyKSByZXR1cm4gXCJzcGlubmVyXCI7XG4gICAgcmV0dXJuIFwiaW5pdGlhbFwiO1xuICB9LCBbaXNMb2FkaW5nLCBpdGVtcy5sZW5ndGhdKTtcbiAgY29uc3Qgc2VhcmNoSW5wdXQgPSAvKiBAX19QVVJFX18gKi9qc3goQm94LCB7XG4gICAgcGFkZGluZ1g6IDIsXG4gICAgcGFkZGluZ0JvdHRvbTogMixcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4KFNlYXJjaENhcmQsIHtcbiAgICAgIHJhZGl1czogNCxcbiAgICAgIHRvbmU6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi9qc3goVGV4dElucHV0LCB7XG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIlNlYXJjaCBsaXN0XCIsXG4gICAgICAgIGF1dG9Db21wbGV0ZTogXCJvZmZcIixcbiAgICAgICAgYm9yZGVyOiBmYWxzZSxcbiAgICAgICAgY2xlYXJCdXR0b246IEJvb2xlYW4oc2VhcmNoUXVlcnkpLFxuICAgICAgICBkaXNhYmxlZDogIWlzU2VhcmNoUmVhZHksXG4gICAgICAgIGZvbnRTaXplOiBbMiwgMiwgMV0sXG4gICAgICAgIGljb246IGxvYWRpbmdWYXJpYW50ID09PSBcInNwaW5uZXJcIiA/IEFuaW1hdGVkU3Bpbm5lckljb24gOiBTZWFyY2hJY29uLFxuICAgICAgICBvbkNoYW5nZTogaGFuZGxlUXVlcnlDaGFuZ2UsXG4gICAgICAgIG9uQ2xlYXI6IGhhbmRsZUNsZWFyU2VhcmNoLFxuICAgICAgICBvbktleURvd246IGhhbmRsZVNlYXJjaEtleURvd24sXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaCBsaXN0XCIsXG4gICAgICAgIHJhZGl1czogMixcbiAgICAgICAgcmVmOiBzZXRTZWFyY2hJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNwZWxsQ2hlY2s6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc2VhcmNoSW5wdXRWYWx1ZVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqL2pzeChTb3VyY2VQcm92aWRlciwge1xuICAgIG5hbWU6IHNvdXJjZU5hbWUgfHwgcGFyZW50U291cmNlTmFtZSxcbiAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovanN4cyhQYW5lLCB7XG4gICAgICBjdXJyZW50TWF4V2lkdGg6IDM1MCxcbiAgICAgIFwiZGF0YS11aVwiOiBcIkRvY3VtZW50TGlzdFBhbmVcIixcbiAgICAgIGlkOiBwYW5lS2V5LFxuICAgICAgbWF4V2lkdGg6IDY0MCxcbiAgICAgIG1pbldpZHRoOiAzMjAsXG4gICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICAgIGNoaWxkcmVuOiBbX0RFQlVHLCAvKiBAX19QVVJFX18gKi9qc3goRG9jdW1lbnRMaXN0UGFuZUhlYWRlciwge1xuICAgICAgICBjb250ZW50QWZ0ZXI6IHNlYXJjaElucHV0LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgaW5pdGlhbFZhbHVlVGVtcGxhdGVzLFxuICAgICAgICBtZW51SXRlbUdyb3VwcyxcbiAgICAgICAgbWVudUl0ZW1zOiBtZW51SXRlbXNXaXRoU2VsZWN0ZWRTdGF0ZSxcbiAgICAgICAgc2V0TGF5b3V0LFxuICAgICAgICBzZXRTb3J0T3JkZXIsXG4gICAgICAgIHRpdGxlXG4gICAgICB9KSwgLyogQF9fUFVSRV9fICovanN4KERvY3VtZW50TGlzdFBhbmVDb250ZW50LCB7XG4gICAgICAgIGNoaWxkSXRlbUlkLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgZmlsdGVySXNTaW1wbGVUeXBlQ29uc3RyYWludCxcbiAgICAgICAgaGFzTWF4SXRlbXMsXG4gICAgICAgIGhhc1NlYXJjaFF1ZXJ5OiBCb29sZWFuKHNlYXJjaFF1ZXJ5KSxcbiAgICAgICAgaXNBY3RpdmUsXG4gICAgICAgIGlzTGF6eUxvYWRpbmcsXG4gICAgICAgIGlzTG9hZGluZyxcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIGxheW91dCxcbiAgICAgICAgbG9hZGluZ1ZhcmlhbnQsXG4gICAgICAgIG9uTGlzdENoYW5nZSxcbiAgICAgICAgb25SZXRyeSxcbiAgICAgICAgcGFuZVRpdGxlOiB0aXRsZSxcbiAgICAgICAgc2VhcmNoSW5wdXRFbGVtZW50LFxuICAgICAgICBzaG93SWNvbnNcbiAgICAgIH0sIHBhbmVLZXkpXVxuICAgIH0pXG4gIH0pO1xufSk7XG5leHBvcnQgeyBEb2N1bWVudExpc3RQYW5lIGFzIGRlZmF1bHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LWNkY2Y5NjdkLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sanity/lib/_chunks/index-cdcf967d.js\n"));

/***/ })

}]);